<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="telega" xml:lang="telega">
<head>
<!-- 2023-11-15 Ð¡Ñ€ 04:16 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Telega Manual (v0.8.212)</title>
<meta name="author" content="Zajcev Evgeny" />
<meta name="generator" content="Org Mode" />
<link rel="stylesheet" type="text/css" href="https://zevlg.github.io/org-html-themes/src/readtheorg_theme/css/htmlize.css"/>
<link rel="stylesheet" type="text/css" href="https://zevlg.github.io/org-html-themes/src/readtheorg_theme/css/readtheorg.css"/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
<script type="text/javascript" src="https://zevlg.github.io/org-html-themes/src/lib/js/jquery.stickytableheaders.min.js"></script>
<script type="text/javascript" src="https://zevlg.github.io/org-html-themes/src/readtheorg_theme/js/readtheorg.js"></script>
<style> #content{max-width:1800px;}</style>
<style>h1, h2, h3, h4, h5, h6 { margin: 16px 0px 0px 0px; }</style>
<style>#table-of-contents h2 { margin: 0; }</style>
<style>ul, ol, dl { margin: 0; }</style>
<style>pre.src { margin: 1px 0px 1px 0px; }</style>
<style>code {vertical-align:middle;font-size: 90%;}</style>
<style>kbd {margin: 0px 0.1em; padding: 0.1em 0.5em; border-radius: 3px; border: 1px solid rgb(204, 204, 204); color: rgb(51, 51, 51); line-height: 1.0; vertical-align: middle; display: inline-block; box-shadow: 0px 1px 0px rgba(0,0,0,0.2), inset 0px 0px 0px 2px #ffffff; background-color: rgb(247, 247, 247); -moz-box-shadow: 0 1px 0px rgba(0, 0, 0, 0.2), 0 0 0 2px #ffffff inset; -webkit-box-shadow: 0 1px 0px rgba(0, 0, 0, 0.2), 0 0 0 2px #ffffff inset; -moz-border-radius: 3px; -webkit-border-radius: 3px; text-shadow: 0 1px 0 #fff;}</style>
<style>.underline {text-decoration:underline;}</style>
<style>p{font-size:16px; line-height:24px; margin:6px 0px 6px 0px;}</style>
<style>img#toc-logo {height: 1.25em; vertical-align: top;}</style>
<style>.self-link {float: left; padding-right: 4px; margin-left: -20px; line-height: 1;}</style>
<style>.octicon-link {vertical-align: middle; visibility: hidden;}</style>
<style>h1:hover .octicon-link, h2:hover .octicon-link, h3:hover .octicon-link, h4:hover .octicon-link, h5:hover .octicon-link, h6:hover .octicon-link { visibility: visible; }</style>
<style>.octicon {display: inline-block; fill: currentColor;}</style>
<style>#links-panel {float: right;} </style>
<style>#links-panel img {height: 0.75em; margin: 2px;}</style>
<link rel="icon" href="https://raw.githubusercontent.com/zevlg/telega.el/master/etc/telega-logo.svg">
</head>
<body>
<div id="content" class="content">
<div id="table-of-contents" role="doc-toc">
<h2><img id="toc-logo" src="https://raw.githubusercontent.com/zevlg/telega.el/master/etc/telega-logo.svg"/>&nbsp;Telega Manual (v0.8.212)</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#introduction">Introduction</a></li>
<li><a href="#installation">Installation</a>
<ul>
<li><a href="#dependencies">Dependencies</a></li>
<li><a href="#macos-users">MacOS users</a></li>
<li><a href="#linux-users">Linux users</a></li>
<li><a href="#windows-10-users">Windows 10 users</a></li>
<li><a href="#building-tdlib">Building TDLib</a></li>
<li><a href="#updating-telega-and-tdlib">Updating telega and TDLib</a></li>
<li><a href="#installing-telega-and-tdlib-from-gnu-guix">Installing telega and TDLib from GNU Guix</a></li>
<li><a href="#installing-telega-from-melpa">Installing telega from MELPA</a></li>
<li><a href="#installing-telega-directly-from-github">Installing telega directly from GitHub</a></li>
<li><a href="#running-telega-server-in-docker">Running telega-server in docker</a></li>
</ul>
</li>
<li><a href="#getting-started">Getting started</a></li>
<li><a href="#settings-for-emacs-as-daemon">Settings for Emacs As Daemon</a></li>
<li><a href="#telega-glossary">Telega glossary</a></li>
<li><a href="#telega-prefix-map">Telega prefix map</a></li>
<li><a href="#root-buffer">Root Buffer</a>
<ul>
<li><a href="#rootbuf-fast-navigation">Rootbuf fast navigation</a></li>
<li><a href="#rootbuf-view-switching">Rootbuf view switching</a></li>
<li><a href="#voicevideo-calls">Voice/Video calls</a></li>
</ul>
</li>
<li><a href="#telega-match-expressions">Telega Match Expressions</a>
<ul>
<li><a href="#list-of-chat-temexes">List of Chat Temexes</a></li>
<li><a href="#list-of-message-temexes">List of Message Temexes</a></li>
<li><a href="#list-of-user-temexes">List of User Temexes</a></li>
<li><a href="#list-of-message-sender-temexes">List of Message Sender Temexes</a></li>
<li><a href="#list-of-forum-topic-temexes">List of Forum Topic Temexes</a></li>
<li><a href="#list-of-story-temexes">List of Story Temexes</a></li>
<li><a href="#customizable-options-making-use-of-telega-match-expressions">Customizable options making use of Telega Match Expressions</a></li>
</ul>
</li>
<li><a href="#chat-folders">Chat Folders</a></li>
<li><a href="#filtering-chats">Filtering chats</a></li>
<li><a href="#sorting-chats">Sorting chats</a>
<ul>
<li><a href="#sorting-criteria">Sorting criteria</a></li>
<li><a href="#customizable-options-making-use-of-sorting-criteria">Customizable options making use of sorting criteria</a></li>
</ul>
</li>
<li><a href="#chat-buffer">Chat buffer</a>
<ul>
<li><a href="#chatbuf-fast-navigation">Chatbuf fast navigation</a></li>
<li><a href="#sending-ordinary-messages">Sending ordinary messages</a></li>
<li><a href="#attaching-media">Attaching media</a></li>
<li><a href="#replying-to-a-message">Replying to a message</a></li>
<li><a href="#editing-previously-sent-message">Editing previously sent message</a></li>
<li><a href="#forwarding-messages">Forwarding messages</a></li>
<li><a href="#deleting-messages">Deleting messages</a></li>
<li><a href="#scheduling-messages-and-reminders">Scheduling messages and reminders</a></li>
<li><a href="#navigating-previous-input">Navigating previous input</a></li>
<li><a href="#completing-input-in-chatbuf">Completing input in chatbuf</a>
<ul>
<li><a href="#using-capf-for-input-completions">Using capf for input completions</a></li>
</ul>
</li>
<li><a href="#sending-messages-via-bots">Sending messages via bots</a></li>
<li><a href="#filtering-chat-messages-aka-shared-media">Filtering chat messages a.k.a. Shared Media</a></li>
<li><a href="#inplace-searching-in-text-messages-or-media-captions">Inplace searching in text messages or media captions</a></li>
<li><a href="#opening-files-using-external-programs">Opening files using external programs</a></li>
<li><a href="#client-side-messages-ignoring">Client side messages ignoring</a></li>
<li><a href="#favorite-messages">Favorite messages</a></li>
<li><a href="#media-controls-for-media-messages">Media Controls for media messages</a></li>
<li><a href="#forums-and-topics">Forums and Topics</a></li>
</ul>
</li>
<li><a href="#video-chats">Video Chats</a></li>
<li><a href="#stickers--animations">Stickers / Animations</a>
<ul>
<li><a href="#animated-stickers">Animated stickers</a></li>
<li><a href="#favorite-and-recently-used-stickers">Favorite and recently used stickers</a></li>
<li><a href="#animations">Animations</a></li>
</ul>
</li>
<li><a href="#multiple-accounts">Multiple accounts</a></li>
<li><a href="#minor-modes">Minor Modes</a>
<ul>
<li><a href="#notifications-for-incoming-messages">Notifications for incoming messages</a></li>
<li><a href="#telega-mode-line-mode">telega-mode-line-mode</a></li>
<li><a href="#telega-appindicator-mode">telega-appindicator-mode</a></li>
<li><a href="#telega-autoplay-mode">telega-autoplay-mode</a></li>
<li><a href="#telega-squash-message-mode">telega-squash-message-mode</a></li>
<li><a href="#telega-image-mode">telega-image-mode</a></li>
<li><a href="#telega-edit-file-mode">telega-edit-file-mode</a></li>
<li><a href="#telega-highlight-text-mode">telega-highlight-text-mode</a></li>
<li><a href="#telega-patrons-mode">telega-patrons-mode</a></li>
<li><a href="#telega-my-location-mode">telega-my-location-mode</a></li>
<li><a href="#telega-active-locations-mode">telega-active-locations-mode</a></li>
<li><a href="#telega-active-video-chats-mode">telega-active-video-chats-mode</a></li>
<li><a href="#telega-recognize-voice-message-mode">telega-recognize-voice-message-mode</a></li>
<li><a href="#telega-auto-translate-mode">telega-auto-translate-mode</a></li>
<li><a href="#telega-auto-download-mode-wip">telega-auto-download-mode (WIP)</a></li>
<li><a href="#telega-play-media-sequence-mode"><span class="todo TODO">TODO</span> telega-play-media-sequence-mode</a></li>
<li><a href="#telega-root-auto-fill-mode">telega-root-auto-fill-mode</a></li>
<li><a href="#telega-voip-sounds-mode">telega-voip-sounds-mode</a></li>
</ul>
</li>
<li><a href="#contributed-packages">Contributed packages</a>
<ul>
<li><a href="#ol-telegael--org-mode-links-to-telegram-chats-and-messages"><i>ol-telega.el</i> &#x2013; Org mode links to telegram chats and messages</a></li>
<li><a href="#telega-status-historyel--global-minore-mode-to-save-users-online-status-history"><i>telega-status-history.el</i> &#x2013; Global minore mode to save user's online status history</a></li>
<li><a href="#telega-url-shortenel--makes-urls-look-nicer"><i>telega-url-shorten.el</i> &#x2013; Makes urls look nicer</a></li>
<li><a href="#telega-alertel--notifications-using-alertel"><i>telega-alert.el</i> &#x2013; Notifications using <code>alert.el</code></a></li>
<li><a href="#telega-dired-dwimel--attach-files-from-dired-in-dwim-style"><i>telega-dired-dwim.el</i> &#x2013; Attach files from dired in DWIM style</a></li>
<li><a href="#telega-live-locationel--manage-live-location-in-telega-using-geoel"><i>telega-live-location.el</i> &#x2013; Manage live location in Telega using geo.el</a></li>
<li><a href="#telega-mnzel--display-emacs-content-inside-telega-messages"><i>telega-mnz.el</i> &#x2013; Display Emacs content inside Telega messages.</a></li>
<li><a href="#telega-dashboardel--important-telega-chats-in-the-emacs-dashboard"><i>telega-dashboard.el</i> &#x2013; Important telega chats in the Emacs dashboard</a></li>
<li><a href="#telega-emacs-storiesel--display-emacs-stories-in-the-dashboard"><i>telega-emacs-stories.el</i> &#x2013; Display Emacs Stories in the dashboard</a></li>
<li><a href="#telega-transientel--transient-magit-like-style-commands-for-telega"><i>telega-transient.el</i> &#x2013; Transient (magit-like style) commands for telega</a></li>
<li><a href="#telega-adblockel--block-advertisement-messages"><i>telega-adblock.el</i> &#x2013; Block advertisement messages</a></li>
<li><a href="#telega-channels-exportel--export-telegam-channels-to-opml"><i>telega-channels-export.el</i> &#x2013; Export Telegam channels to OPML</a></li>
<li><a href="#telega-bridge-botel--replace-bridge-bot-user"><i>telega-bridge-bot.el</i> &#x2013; Replace bridge bot user.</a></li>
</ul>
</li>
<li><a href="#troubleshooting">Troubleshooting</a>
<ul>
<li><a href="#cant-compile-telega-server">Can't compile <code>telega-server</code></a></li>
<li><a href="#invalid-tdlib-version">Invalid TDLib version</a></li>
<li><a href="#stickers-are-not-shown">Stickers are not shown</a></li>
<li><a href="#notifications-does-not-work">Notifications does not work</a></li>
</ul>
</li>
</ul>
</div>
</div>
<h1 class="title"><img src="https://raw.githubusercontent.com/zevlg/telega.el/master/etc/telega-logo.svg"/>&nbsp;Telega Manual<div id="links-panel"><a href="https://github.com/zevlg/telega.el/"><img src="https://raw.githubusercontent.com/simple-icons/simple-icons/develop/icons/github.svg"/></a><a href="https://t.me/emacs_telega"><img src="https://raw.githubusercontent.com/simple-icons/simple-icons/develop/icons/telegram.svg"/></a><a href="https://opencollective.com/telega"><img src="https://raw.githubusercontent.com/simple-icons/simple-icons/develop/icons/opencollective.svg"/></a></h1>

<blockquote>
<p>
This version of the manual for bleeding edge <code>telega</code> from "master"
branch running under bleeding edge TDLib from "master" branch. For
release version of the manual switch to <a href="https://zevlg.github.io/telega.el/index-release.html">Telega Manual (release)</a>.
</p>

<p>
This file is automatically generated from <code>telega-ellit.org</code> by
<a href="https://github.com/zevlg/ellit-org.el">GitHub#ellit-org.el</a> tool.
Do not edit manually.  Modify <code>telega-ellit.org</code> or comments in
<code>.el</code> files instead.
</p>
</blockquote>

<div id="outline-container-introduction" class="outline-2">
<h2 id="introduction"><a class="self-link" href="#introduction"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Introduction</h2>
<div class="outline-text-2" id="text-introduction">
<p>
<code>telega</code> is full featured unofficial client for <a href="https://telegram.org">Telegram</a> platform for <a href="https://www.gnu.org/software/emacs/">GNU Emacs</a>.
</p>

<p>
<code>telega</code> is actively developed, for this reason, some features are not
implemented, or they are present just as skeleton for future
implementation. However, the core parts are mature enough so that it
is possible to use <code>telega</code> on daily basis.
</p>

<p>
Join us at <a href="https://t.me/emacs_telega">https://t.me/emacs_telega</a>
</p>

<p>
If you enjoy <code>telega</code>, consider making a <a href="https://opencollective.com/telega">donation for unstoppable
development</a>, also see benefits you get <a href="#telega-patrons-mode">being telega patron</a>.
</p>
</div>
</div>

<div id="outline-container-installation" class="outline-2">
<h2 id="installation"><a class="self-link" href="#installation"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Installation</h2>
<div class="outline-text-2" id="text-installation">
<p>
<code>telega</code> depends on the <code>visual-fill-column</code> and <code>rainbow-identifiers</code>
packages.  This dependency automatically installs if you install
<code>telega</code> from MELPA or GNU Guix.  Otherwise will you need to install
these packages by hand.
</p>

<p>
<code>telega</code> is built on top of the official library provided by Telegram
<a href="https://core.telegram.org/tdlib">TDLib</a>.  Most distributions do not provide this package in their
repositories, in which case you will have to install it manually by
following the instructions.
</p>

<p>
<a href="https://guix.gnu.org/">GNU Guix</a>, however, does have both <code>telega</code> and <code>TDLib</code> packaged.  If
you use GNU Guix you can skip directly to <a href="#installing-telega-and-tdlib-from-gnu-guix">Installing from GNU Guix</a>.
</p>

<p>
Also, you can use <a href="https://www.docker.com/">Docker</a> to avoid complicated installation steps by
using one of the provided docker images.  See <a href="#running-telega-server-in-docker">Running telega-server in
docker</a> for details.
</p>
</div>

<div id="outline-container-dependencies" class="outline-3">
<h3 id="dependencies"><a class="self-link" href="#dependencies"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Dependencies</h3>
<div class="outline-text-3" id="text-dependencies">
<ul class="org-ul">
<li><code>GNU Emacs</code> (at least 26.1 is required with svg support)</li>
<li><code>GNU make</code> (known as gmake on BSD platforms)</li>
<li><code>GNU gperf</code> (for building TDLib)</li>
<li><code>CMake</code> (for building TDLib)</li>
<li><code>pkg-config</code> (for building <code>telega-server</code>)</li>
</ul>

<p>
<b><b>Optional dependencies</b></b>:
</p>
<ul class="org-ul">
<li><code>Python</code> (optional, for testing the <code>telega-server</code>)</li>
<li><code>GNU Guix</code> <span class="underline">(optional, if using the Guix installation method)</span></li>
<li><code>libappindicator3</code> (optional, to show <code>telega</code> icon/info in system
tray)</li>
<li><code>dwebp</code> (optional, to display <a href="#stickers--animations">Stickers</a>)</li>
<li><code>tgs2png</code> (optional, for <a href="#animated-stickers">Animated Stickers</a>), sources are at
<a href="https://github.com/zevlg/tgs2png">https://github.com/zevlg/tgs2png</a></li>
</ul>

<p>
<code>make</code> is found in most of the modern machines. The other packages can
be download with the system package manager (such as <code>apt</code> for
Debian-based distributions, <code>dnf</code> for Fedora or <code>pacman</code> for
Arch-based).
</p>
</div>
</div>

<div id="outline-container-macos-users" class="outline-3">
<h3 id="macos-users"><a class="self-link" href="#macos-users"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>MacOS users</h3>
<div class="outline-text-3" id="text-macos-users">
<ol class="org-ol">
<li>If you are using <a href="https://emacsformacosx.com/">Emacs For Mac OS X</a>, or you installed Emacs by
running <code>$ brew cask install emacs</code>, make sure you installed a
recent enough version (&gt;= <code>emacs-27.1-mac-8.1</code>, you can check your
version by running <code>$ brew info emacs-mac</code> or <code>$ brew cask info
      emacs-mac</code>) with rsvg support (<code>$ brew install emacs-mac
      --with-librsvg</code>), or your Emacs may not display some media
correctly, in this case consider switching to <a href="https://github.com/d12frosted/homebrew-emacs-plus">emacs-plus</a>.</li>

<li><p>
If you are using <a href="https://bitbucket.org/mituharu/emacs-mac/">Emacs-mac</a>, or you installed Emacs by running <code>$
      brew install emacs-mac</code> or <code>$ brew cask install emacs-mac</code>, your
Emacs has bug dealing with complex svg, which leads to Emacs
hangups.  Compiling Emacs with rsvg support by running <code>$ brew
      install emacs-mac --with-librsvg</code> will fix this problem.
</p>

<p>
NOTE: <code>telega</code> cannot display stickers correctly with emacs-mac,
even when emacs-mac is compiled with rsvg support.  If you want
sticker support, please consider switching to emacs-plus.
</p></li>

<li><a href="https://github.com/d12frosted/homebrew-emacs-plus">emacs-plus</a> is the best choice to run <code>telega</code>.</li>
</ol>
</div>
</div>

<div id="outline-container-linux-users" class="outline-3">
<h3 id="linux-users"><a class="self-link" href="#linux-users"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Linux users</h3>
<div class="outline-text-3" id="text-linux-users">
<p>
<code>telega</code> requires at least GNU Emacs 26.1 with optional, but highly
recommended, <code>svg</code> support. If Emacs version is less then 27.1, then
<code>imagemagick</code> is also required.  Most distributions provide GNU Emacs
compiled with these dependencies when installing GNU Emacs with GTK+
support (graphical).
</p>
</div>
</div>

<div id="outline-container-windows-10-users" class="outline-3">
<h3 id="windows-10-users"><a class="self-link" href="#windows-10-users"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Windows 10 users</h3>
<div class="outline-text-3" id="text-windows-10-users">
<p>
See <a href="https://ritschmaster.github.io/2021/06/13/Using-telga-in-Windows-10.html">detailed description</a> how to install <code>telega</code> under Windows 10.
</p>

<p>
Thanks to <a href="https://t.me/ritsch_master"><code>@ritsch_master</code></a>
</p>
</div>
</div>

<div id="outline-container-building-tdlib" class="outline-3">
<h3 id="building-tdlib"><a class="self-link" href="#building-tdlib"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Building TDLib</h3>
<div class="outline-text-3" id="text-building-tdlib">
<p>
<a href="https://core.telegram.org/tdlib">TDLib</a> is the library for building Telegram clients. It requires a
large amount of memory to be built.  Make sure you are using TDLib
version greater or equal to 1.8.21.
</p>

<p>
On MacOS you can install a pre-built <code>TDLib</code> package using homebrew
from <a href="https://brew.sh">brew.sh</a>.  Just run:
</p>
<div class="org-src-container">
<pre class="src src-shell">$ brew install tdlib --HEAD
</pre>
</div>

<p>
On Linux, you will need to build <code>TDLib</code> from source.  Use 
<a href="https://tdlib.github.io/td/build.html">TDLib build instructions generator</a> for comprehensive build
instructions.
</p>

<p>
In general, you need to install all <a href="https://github.com/tdlib/td/#dependencies">TDLib dependencies</a> then get TDLib
sources and compile them using <code>CMake</code>.
</p>

<p>
To get the source:
</p>
<div class="org-src-container">
<pre class="src src-shell">$ git clone https://github.com/tdlib/td.git
</pre>
</div>

<p>
Move into the folder with <code>$ cd ./td</code> or wherever you checked out
<code>td</code>.
</p>

<p>
Prepare a folder for building the library:
</p>
<div class="org-src-container">
<pre class="src src-shell">$ mkdir build &amp;&amp; <span style="font-weight: bold;">cd</span> build &amp;&amp; cmake ../
</pre>
</div>

<p>
Build the sources:
</p>
<div class="org-src-container">
<pre class="src src-shell">$ make -jN
</pre>
</div>

<p>
with <code>N</code> number of cores that should be used for the compilation (the
optimal value is the number of physical cores on the machine).
</p>

<p>
Finally, to install the library system-wide:
</p>
<div class="org-src-container">
<pre class="src src-shell">$ sudo make install
</pre>
</div>

<p>
It will install headers to <code>/usr/local/include</code> and library itself
into <code>/usr/local/lib</code>.  If you have TDLib installed in other location,
don't forget to modify <code>telega-server-libs-prefix</code> before starting
<code>telega</code>.
</p>

<p>
For Linux users, make sure <code>/usr/local/lib</code> is in your ldconfig cache,
otherwise telega server build will fail.
</p>
</div>
</div>

<div id="outline-container-updating-telega-and-tdlib" class="outline-3">
<h3 id="updating-telega-and-tdlib"><a class="self-link" href="#updating-telega-and-tdlib"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Updating telega and TDLib</h3>
<div class="outline-text-3" id="text-updating-telega-and-tdlib">
<p>
If you use <code>telega</code> from master and update it from time to time it
might ask you to update/rebuild TDLib and <code>telega-server</code>.  To update
TDLib and rebuild telega-server do next:
</p>

<ol class="org-ol">
<li>Fetch, rebuild and reinstall updated TDLib as described above</li>
<li>On Linux run <code>$ sudo ldconfig</code> to refresh ldconfig cache</li>
<li>Run <code>$ make server-reinstall</code> in the <code>telega.el</code> sources directory
to rebuild and reinstall <code>telega-server</code></li>
</ol>

<p>
Now you are ready to run updated <code>telega</code>.
</p>
</div>
</div>

<div id="outline-container-installing-telega-and-tdlib-from-gnu-guix" class="outline-3">
<h3 id="installing-telega-and-tdlib-from-gnu-guix"><a class="self-link" href="#installing-telega-and-tdlib-from-gnu-guix"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Installing telega and TDLib from <a href="https://guix.gnu.org/">GNU Guix</a></h3>
<div class="outline-text-3" id="text-installing-telega-and-tdlib-from-gnu-guix">
<p>
<code>telega</code> and <code>TDLib</code> are both available in GNU Guix. If you have a
resource constrained machine or would simply prefer to bypass
compiling <code>TDLib</code> from source, this is a good option!
</p>

<p>
On Guix System:
</p>
<div class="org-src-container">
<pre class="src src-shell">$ guix package -i emacs-telega font-gnu-{unifont,freefont}
</pre>
</div>

<p>
The latter two packages provide glyphs used by <code>telega</code>.
</p>

<p>
On "Foreign" Distributions:
</p>
<ul class="org-ul">
<li>Use the shell installer script, or install GNU Guix manually on-top
of your current distribution. <a href="https://guix.gnu.org/manual/en/html_node/Installation.html#Installation">Installation Documentation</a></li>

<li>Enable fetching substitutes from the build server cache if you do
not wish to build from source. <a href="https://guix.gnu.org/manual/en/html_node/Substitute-Server-Authorization.html#Substitute-Server-Authorization">Substitute Server Authorization</a></li>

<li><p>
And finally, run:
</p>
<div class="org-src-container">
<pre class="src src-shell">$ guix package -i emacs emacs-telega
</pre>
</div></li>
</ul>

<p>
It is easiest to use the version of Emacs installed from GNU Guix
because it is modified with an autoloader to identify and
automatically use Emacs packages installed from Guix. Alternatively,
if you wish to use the bundle of Emacs provided by your distribution,
you may install the <code>telega</code> elisp sources through MELPA and use Guix
to provide the server binary precompiled.
</p>

<p>
Consult the official GNU Guix documentation for further
questions. Issues related to the GUIX package must be accompanied by
the <a href="https://github.com/zevlg/telega.el/labels/guix">GUIX label</a> in the issue tracker.
</p>

<p>
Do note that since <code>telega</code> is actively maintained installations from
Guix might at times lag behind master, but regular attempts to keep it
updated will occur.  If the version in Guix is too outdated or is
missing a feature, please use the protocol for the issue tracker.
</p>
</div>
</div>

<div id="outline-container-installing-telega-from-melpa" class="outline-3">
<h3 id="installing-telega-from-melpa"><a class="self-link" href="#installing-telega-from-melpa"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Installing telega from MELPA</h3>
<div class="outline-text-3" id="text-installing-telega-from-melpa">
<p>
<code>telega</code> is available from <a href="https://melpa.org">MELPA</a>, so you can install it from there as
usual package.  This is a preferable method, because it will
automatically handle all dependencies and provides autoloads.
</p>

<p>
For TDLib 1.8.0 release you might
consider stable <code>telega</code> version.  Stable <code>telega</code> version won't
require you to rebuild TDLib until next TDLib 1.9.0 release, <code>telega</code> updates will work with
1.8.0.  Stable <code>telega</code> is placed
in <a href="https://stable.melpa.org/">MELPA Stable</a>.  Package configuration for <code>telega</code> from MELPA Stable
might look like:
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(add-to-list 'package-archives
           '(<span style="font-style: italic;">"melpa-stable"</span> . <span style="font-style: italic;">"https://stable.melpa.org/packages/"</span>))
(add-to-list 'package-pinned-packages '(telega . <span style="font-style: italic;">"melpa-stable"</span>))
</pre>
</div>

<p>
<code>telega</code> from unstable <a href="https://melpa.org">MELPA</a> is a bleeding edge of the <code>telega</code>
development and <code>telega</code> updates might require also TDLib
update/rebuild sometimes.  However, it brings you all newer (probably
incompatible with TDLib 1.8.0)
functionality faster, no need to wait for TDLib 1.9.0 to access newer features.
</p>

<p>
Or you could use git repository with this melpa-style recipe for <a href="https://github.com/quelpa/quelpa">quelpa</a>:
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(quelpa '(telega <span style="font-weight: bold;">:fetcher</span> github
               <span style="font-weight: bold;">:repo</span> <span style="font-style: italic;">"zevlg/telega.el"</span>
               <span style="font-weight: bold;">:branch</span> <span style="font-style: italic;">"master"</span>
               <span style="font-weight: bold;">:files</span> (<span style="font-weight: bold;">:defaults</span> <span style="font-style: italic;">"contrib"</span> <span style="font-style: italic;">"etc"</span> <span style="font-style: italic;">"server"</span> <span style="font-style: italic;">"Makefile"</span>)))
</pre>
</div>
</div>
</div>

<div id="outline-container-installing-telega-directly-from-github" class="outline-3">
<h3 id="installing-telega-directly-from-github"><a class="self-link" href="#installing-telega-directly-from-github"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Installing telega directly from GitHub</h3>
<div class="outline-text-3" id="text-installing-telega-directly-from-github">
<p>
Make sure dependencies are installed with <kbd>M-x package-install RET visual-fill-column RET</kbd> and <kbd>M-x package-install RET rainbow-identifiers RET</kbd>.
</p>

<p>
Get the source:
</p>
<div class="org-src-container">
<pre class="src src-shell">$ git clone https://github.com/zevlg/telega.el
$ cd telega.el
$ make compile
</pre>
</div>

<p>
Finally load <code>telega</code> into Emacs using:
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">use-package</span> telega
  <span style="font-weight: bold;">:load-path</span>  <span style="font-style: italic;">"~/telega.el"</span>
  <span style="font-weight: bold;">:commands</span> (telega)
  <span style="font-weight: bold;">:defer</span> t)
</pre>
</div>

<p>
Or with:
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(add-to-list 'load-path <span style="font-style: italic;">"~/telega.el"</span>)
(<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">telega</span>)
</pre>
</div>

<p>
The code should be put in the configuration file for Emacs, which
usually is <code>init.el</code>, or <code>emacs.el</code>.
</p>
</div>
</div>

<div id="outline-container-running-telega-server-in-docker" class="outline-3">
<h3 id="running-telega-server-in-docker"><a class="self-link" href="#running-telega-server-in-docker"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Running telega-server in docker</h3>
<div class="outline-text-3" id="text-running-telega-server-in-docker">
<p>
Pull latest <code>telega-server</code> image:
</p>
<div class="org-src-container">
<pre class="src src-shell">$ docker pull zevlg/telega-server:latest
</pre>
</div>

<p>
Make <code>telega</code> know you want to use docker by adding this to your <code>init.el</code>:
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> telega-use-docker t)
</pre>
</div>

<p>
That's it, you are ready to get starting.  However, you might anyway
need to have local <code>ffmpeg</code> installation to utilize some <code>telega</code>
features, such as playing audio/voice messages, capturing video/voice
notes, etc.
</p>
</div>
</div>
</div>

<div id="outline-container-getting-started" class="outline-2">
<h2 id="getting-started"><a class="self-link" href="#getting-started"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Getting started</h2>
<div class="outline-text-2" id="text-getting-started">
<p>
Start <code>telega</code> with <kbd>M-x telega RET</kbd>. The first time it will
ask for the phone number you have associated with the Telegram
network.
</p>

<p>
Some options affecting <code>TDLib</code> runtime:
</p>
<ul class="org-ul">
<li><p>
User Option: <code>telega-directory</code> 
</p>

<p>
Directory for telega runtime files.
Set this variable before loading telega, because other variables
depends on <code>telega-directory</code> value.
</p></li>
</ul>


<p>
Default value: "~/.telega"
</p>

<ul class="org-ul">
<li><p>
User Option: <code>telega-options-plist</code> 
</p>

<p>
Plist of options to set.
To use custom language pack (from "tdesktop" localization target),
add <code>:language_pack_id</code> option.
Only writable options can be set.  See: <a href="https://core.telegram.org/tdlib/options">https://core.telegram.org/tdlib/options</a> 
</p>

<p>
Default value: <code>(:online t :localization_target "tdesktop")</code>
</p></li>
<li><p>
User Option: <code>telega-proxies</code> 
</p>

<p>
List of proxies.
Format is:
  (:server "&lt;ADDRESS&gt;" :port &lt;PORT&gt; :enable &lt;BOOL&gt; :type &lt;PROXY-TYPE&gt;)
</p>

<p>
where PROXY-TYPE is one of:
</p>
<ul class="org-ul">
<li>(:@type "proxyTypeSocks5" :username &lt;USER&gt; :password &lt;PASSWORD&gt;)</li>
<li>(:@type "proxyTypeHttp" :username &lt;USER&gt; :password &lt;PASSWORD&gt;
:http<sub>only</sub> &lt;BOOL&gt;)</li>
<li>(:@type "proxyTypeMtproto" :secret &lt;SECRET-STRING&gt;)</li>
</ul>

<p>
&lt;BOOL&gt; is either t or <code>:false</code>, nil is not valid value. 
</p>

<p>
Default value: <code>nil</code>
</p></li>
<li><p>
User Option: <code>telega-my-location</code> 
</p>

<p>
Set to non-nil to use this as location of me.
Plist in form (:latitude &lt;LAT&gt; :longitude &lt;LONG&gt;)
To publically expose this location set <code>:is_location_visible</code> to
non-nil in <code>telega-options-plist</code>.
Used to calculate distances from other peers to me. 
</p>

<p>
Default value: <code>nil</code>
</p>

<p>
See also <a href="#telega-my-location-mode">telega-my-location-mode</a> to automatically update
<code>telega-my-location</code> when you send location message to the
"Saved Messages" using mobile Telegram client.
</p></li>
</ul>

<p>
To list all available customizable user options use <code>M-x
customize-group RET telega RET</code> command.
</p>
</div>
</div>

<div id="outline-container-settings-for-emacs-as-daemon" class="outline-2">
<h2 id="settings-for-emacs-as-daemon"><a class="self-link" href="#settings-for-emacs-as-daemon"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Settings for Emacs As Daemon</h2>
<div class="outline-text-2" id="text-settings-for-emacs-as-daemon">
<p>
Some people starts Emacs in daemon mode, i.e. <code>emacs --daemon</code>.  Such
Emacs instance has no frames, frames are created when needed and
connects to the daemon process.
</p>

<p>
<code>telega</code> autodetects values for some variables at load time by
examining current frame parameters and window system possibilities.
This won't work in daemon mode.  You need to explicitly specify values
for that variables.  Most notable options are:
</p>
<ul class="org-ul">
<li><p>
User Option: <code>telega-use-images</code> 
</p>

<p>
Non-nil to show images.
Explicitly set it to non-nil if using Emacs as a service and
want to create X frames to show images.
See <a href="https://zevlg.github.io/telega.el/#settings-for-emacs-as-daemon">https://zevlg.github.io/telega.el/#settings-for-emacs-as-daemon</a>
</p></li>

<li><p>
User Option: <code>telega-emoji-font-family</code> 
</p>

<p>
Font to use for emoji image generation using <code>telega-emoji-create-svg</code>.
</p></li>

<li><p>
User Option: <code>telega-emoji-use-images</code> 
</p>

<p>
Non-nil to use images for emojis.
</p></li>

<li><p>
User Option: <code>telega-online-status-function</code> 
</p>

<p>
Function used to determine if user is online.
Function should return non-nil if user is online, and nil if offline.
See <a href="https://github.com/zevlg/telega.el/issues/171">https://github.com/zevlg/telega.el/issues/171</a>
</p></li>
</ul>


<p>
Setting <code>telega-use-images</code> <b><b>before</b></b> loading <code>telega</code> is essential,
because many other custom options depends on its value.
</p>
</div>
</div>

<div id="outline-container-telega-glossary" class="outline-2">
<h2 id="telega-glossary"><a class="self-link" href="#telega-glossary"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Telega glossary</h2>
<div class="outline-text-2" id="text-telega-glossary">
<p>
Before start, please read <a href="https://core.telegram.org/tdlib/getting-started#tdlib-glossary">TDLib glossary</a>
</p>

<p>
<code>telega</code> tries to keep TDLib's terminology, however introduces some
new terms specific to <code>telega</code>.  All of them are used in the manual.
</p>

<dl class="org-dl">
<dt>Root Buffer a.k.a. rootbuf</dt><dd>Buffer with list of chats, you see it just after <kbd>M-x telega RET</kbd>.
Most of the time rootbuf term is used in the manual.
See <a href="#root-buffer">Root Buffer</a></dd>

<dt>Root View</dt><dd>Root Buffer can be shown in different ways.  Way rootbuf is shown is
called root view.
See <a href="#root-buffer">Root Buffer</a></dd>

<dt>Chat Buffer a.k.a. chatbuf</dt><dd>Buffer with chat contents.
See <a href="#chat-buffer">Chat Buffer</a></dd>

<dt>Button</dt><dd>Ordinary Emacs Button (see <code>button.el</code>).  Some outlined area with
text, that can be acted on.  Pressing <kbd>RET</kbd> on the
button, executes button action.  There are many buttons of different
kind in <code>telega</code></dd>

<dt>Chat Button</dt><dd><p>
Button referring to some chat.  Action for such button is to open
corresponding chatbuf.
</p>

<p>
rootbuf lists the chat buttons, such as:
</p>
<pre class="example" id="org7bee91d">
{ðŸŽ—Saved Messages            }ðŸ“Œ  ðŸ“¹ Video (10s)               Friâœ“
[Emacs | Emacs (english)     ]  @oldosfan: same                Fri
...
</pre></dd>

<dt>Temex</dt><dd>Telega Match Expression - S-expression to match telega objects such
as chats or messages.
See <a href="#telega-match-expressions">Telega Match Expressions</a> for the details.</dd>

<dt>[Custom] Chat Filter</dt><dd><p>
Named temex to filter chats in the rootbuf.
</p>

<p>
Custom chat filters are displayed as buttons above the chat list in
the rootbuf, such as:
</p>
<pre class="example" id="orgd26513b">
[243:ðŸ“‘Main      4890]  [51:Groups       4677]  [27:Channels      210]
[53:Contacts         ]  [0:Important         ]  [3:ðŸ“‘Archive      670]
</pre>

<p>
Action for such buttons is to add corresponding temex to the
active chat filter.
</p>

<p>
However, buttons that corresponds to a Telegram Folder, including
"Main" and "Archive", substitutes folder in the active chat filter
with new one at button.
</p>

<ul class="org-ul">
<li><p>
User Option: <code>telega-filter-button-width</code> 
</p>

<p>
Width of the custom filter buttons.
If integer, then use this number of chars.
If float in range (0..1), then occupy this percents of
<code>telega-root-fill-column</code> chars, but not less then 15 chars.
If list, where first element is float, then use 1 and 2 list values as
min and max values for a width calculation using
<code>telega-canonicalize-number</code>. 
</p>

<p>
Default value: <code>(0.25 17 25)</code>
</p></li>
<li><p>
User Option: <code>telega-filters-custom</code> 
</p>

<p>
Alist of custom filters in form (NAME . TEMEX).
NAME can be an i18n string, such as "lng<sub>filters</sub><sub>type</sub><sub>groups</sub>".
This filters are displayed as filter buttons at the top of rootbuf. 
</p>

<p>
Default value: 
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">((<span style="font-style: italic;">"Main"</span> . main)
 (<span style="font-style: italic;">"Important"</span> . important)
 (<span style="font-style: italic;">"Online"</span> and
  (not saved-messages)
  (user is-online))
 (<span style="font-style: italic;">"lng_filters_type_groups"</span> type basicgroup supergroup)
 (<span style="font-style: italic;">"lng_filters_type_channels"</span> type channel)
 (<span style="font-style: italic;">"lng_filters_type_no_archived"</span> . archive))
</pre>
</div></li>

<li><p>
User Option: <code>telega-filter-custom-expand</code> 
</p>

<p>
Non-nil to expand custom filter when adding to active filters. 
</p>

<p>
Default value: <code>t</code>
</p></li>
<li><p>
User Option: <code>telega-filter-custom-show-folders</code> 
</p>

<p>
Non-nil to show telegram folders along the side with custom filters. 
</p>

<p>
Default value: <code>t</code>
</p></li>
</ul></dd>

<dt>Active Chat Filter</dt><dd><p>
List of chat temexes applied to the chat list in rootbuf.
</p>

<p>
Only chats matching <b><b>all</b></b> temexes in the active chat filter
are displayed in rootbuf.  Active chat filter is displayed above the
chat list in rootbuf, such as:
</p>
<pre class="example" id="org5a0321e">
-/------------------------------(main)--------------------------------
</pre>

<p>
<code>(telega-filter-active)</code> returns active chat filter.
</p>

<ul class="org-ul">
<li><p>
User Option: <code>telega-filter-default</code> 
</p>

<p>
Temex to filter chats by default. 
</p>

<p>
Default value: <code>main</code>
</p></li>
</ul></dd>

<dt>Chat Sort Criteria</dt><dd>List of symbols denoting how to sort chats.
See <a href="#sorting-chats">Sorting Chats</a></dd>

<dt>Active Sort Criteria a.k.a. active sorter</dt><dd><p>
Sort criteria applied to the chat list in rootbuf.
</p>

<p>
By default, chats are sorted according to internal Telegram order
(except for chats with custom order).
</p>

<p>
In case active sorter is enabled, it is displayed above the chat
list in rootbuf, such as:
</p>
<pre class="example" id="org0dac409">
-\---------------------(unread-count join-date)-----------------------
</pre></dd>

<dt>Me user a.k.a. me</dt><dd><p>
User currently logged in, <code>(telega-user-me)</code> returns me.
</p>

<p>
me means you, not me.
</p>

<p>
Chat with me is also known as "Saved Messages".
</p></dd>
</dl>
</div>
</div>

<div id="outline-container-telega-prefix-map" class="outline-2">
<h2 id="telega-prefix-map"><a class="self-link" href="#telega-prefix-map"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Telega prefix map</h2>
<div class="outline-text-2" id="text-telega-prefix-map">
<p>
<code>telega</code> has prefix map for common <code>telega</code> commands, such as
switching to rootbuf, switch to "Saved Messages", sending current
buffer as file to a chat, switching accounts, opening chat or
switching to some chat.
</p>

<p>
It is convenient to have it somewhere accessible from <code>global-map</code>,
say <kbd>C-c t</kbd>.  To do so use next code in your <code>init.el</code>:
</p>

<pre class="example">
(define-key global-map (kbd "C-c t") telega-prefix-map)
</pre>

<p>
Or if <code>telega</code> is not accessible to autoload at start time, then use:
</p>

<pre class="example">
(add-hook 'telega-load-hook
	(lambda ()
	  (define-key global-map (kbd "C-c t") telega-prefix-map)))
</pre>

<p>
Telega prefix map bindings:
</p>

<dl class="org-dl">
<dt><kbd>a</kbd> (<code>telega-account-switch</code>)</dt><dd>Switch to the <code>ACCOUNT-NAME</code>.</dd>

<dt><kbd>b</kbd> (<code>telega-switch-buffer</code>)</dt><dd>Interactively switch to CHAT's buffer.
Switch only if <code>CHAT</code> is opened, i.e. has corresponding chatbuf.</dd>

<dt><kbd>c</kbd> (<code>telega-chat-with</code>)</dt><dd>Start messaging with <code>CHAT-OR-USER</code>.</dd>

<dt><kbd>e</kbd> (<code>telega-edit-file-switch-buffer</code>)</dt><dd>Interactively switch to <code>BUFFER</code> having <code>telega-edit-file-mode</code>.</dd>

<dt><kbd>i</kbd> (<code>telega-switch-important-chat</code>)</dt><dd>Switch to important <code>CHAT</code> if any.
If <kbd>C-u</kbd> is used, then select first chat if
multiple chats are important.</dd>

<dt><kbd>f</kbd> (<code>telega-buffer-file-send</code>)</dt><dd>Prepare <code>FILE</code> to be sent as document or photo to <code>CHAT</code>.
If <kbd>C-u</kbd> is specified, then always send as a file.
Otherwise <code>FILE</code> type is automatically detected.
If called interactively, then file associated with current buffer
is used as <code>FILE</code>.
If current buffer is dired, then send all marked files.</dd>

<dt><kbd>s</kbd> (<code>telega-saved-messages</code>)</dt><dd>Switch to "Saved Messages" chat buffer.
If "Saved Messages" chat is not opened, then open it.
If <kbd>C-u</kbd> is specified, then goto prompt otherwise
keep the point, where it is.</dd>

<dt><kbd>t</kbd> (<code>telega</code>)</dt><dd>Start telega.el Telegram client.
Pop to root buffer.
If <kbd>C-u</kbd> is specified, then do not pop to root buffer.</dd>

<dt><kbd>u</kbd> (<code>telega-switch-unread-chat</code>)</dt><dd><p>
Switch to next unread message in next unread <code>CHAT</code>.
<code>CHAT</code> considered unread if matches <code>telega-unread-chat-temex</code>.
</p>

<p>
Customizable options:
</p>
<ul class="org-ul">
<li><p>
User Option: <code>telega-unread-chat-temex</code> 
</p>

<p>
Chat Temex for <code>telega-switch-unread-chat</code> command. 
</p>

<p>
Default value: <code>(and main unread)</code>
</p></li>
</ul></dd>

<dt><kbd>w</kbd> (<code>telega-browse-url</code>)</dt><dd>Open the <code>URL</code>.
If <code>URL</code> can be opened directly inside telega, then do it.
Invite links and link to users can be directly opened in telega.
If <code>IN-WEB-BROWSER</code> is non-nil then force opening in web browser.</dd>
</dl>
</div>
</div>

<div id="outline-container-root-buffer" class="outline-2">
<h2 id="root-buffer"><a class="self-link" href="#root-buffer"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Root Buffer</h2>
<div class="outline-text-2" id="text-root-buffer">
<p>
rootbuf is the heart of the <code>telega</code>.  Switch to rootbuf with
<kbd>M-x telega RET</kbd> or use
<kbd>t</kbd> (<code>telega</code>) binding from the
<a href="#telega-prefix-map">Telega prefix map</a>.
</p>

<p>
<b>TODO</b>: describe parts of the rootbuf: status, custom-filters,
*folders, active chat filter, active chat sorter
</p>

<p>
rootbuf lists chats filtered by active chat filter.  Press
<kbd>h</kbd>, <kbd>i</kbd> (<code>telega-describe-chat</code>) to get
detailed description of the chat at point.
</p>

<p>
Important customizable options:
</p>
<ul class="org-ul">
<li><p>
User Option: <code>telega-root-fill-column</code> 
</p>

<p>
Maximum width to use in root buffer to display active filters and chats. 
</p>

<p>
Default value: <code>70</code>
</p>

<p>
This option is applied only if <a href="#telega-root-auto-fill-mode">telega-root-auto-fill-mode</a> is
disabled.  Default behaviour is to automatically adjust
<code>telega-root-fill-column</code> to the width of the window displaying
rootbuf.
</p></li>

<li><p>
User Option: <code>telega-root-keep-cursor</code> 
</p>

<p>
Non-nil to keep cursor at current chat, even if chat's order changes.
Set to <code>track</code>, to move cursor to corresponding chat button, when
chat buffers are switched, useful in side-by-side window setup
for rootbuf and chatbuf.
</p>

<p>
Consider setting <code>switch-to-buffer-preserve-window-point</code> to nil,
to make <code>telega-root-keep-cursor</code> always work as expected. 
</p>

<p>
Default value: <code>track</code>
</p></li>
</ul>
</div>

<div id="outline-container-rootbuf-fast-navigation" class="outline-3">
<h3 id="rootbuf-fast-navigation"><a class="self-link" href="#rootbuf-fast-navigation"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Rootbuf fast navigation</h3>
<div class="outline-text-3" id="text-rootbuf-fast-navigation">
<p>
<kbd>M-g</kbd> prefix in rootbuf is used to jump across chat buttons:
</p>

<dl class="org-dl">
<dt><kbd>M-g u</kbd> (<code>telega-root-next-unread</code>)</dt><dd>Move point to the next chat with unread message.</dd>

<dt><kbd>M-g i</kbd> (<code>telega-root-next-important</code>)</dt><dd><p>
Move point to the next important chat.
</p>

<p>
Chat is important if matches <code>telega-important-chat-temex</code>
<a href="#telega-match-expressions">temex</a>.
</p></dd>

<dt><kbd>M-g @</kbd>, <kbd>M-g m</kbd> (<code>telega-root-next-mention</code>)</dt><dd>Move point to the next chat with mention.</dd>

<dt><kbd>M-g !</kbd> (<code>telega-root-next-reaction</code>)</dt><dd>Move point to the next chat with unread reaction.</dd>
</dl>
</div>
</div>

<div id="outline-container-rootbuf-view-switching" class="outline-3">
<h3 id="rootbuf-view-switching"><a class="self-link" href="#rootbuf-view-switching"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Rootbuf view switching</h3>
<div class="outline-text-3" id="text-rootbuf-view-switching">
<p>
Rootbuf view is the specific way how rootbuf is shown to the user.  By
default, list of the chats is shown, this is known as default root
view.
</p>

<p>
<kbd>v</kbd> prefix in rootbuf is used to switch root views:
</p>
<dl class="org-dl">
<dt><kbd>s</kbd>, <kbd>v s</kbd> (<code>telega-view-search</code>)</dt><dd>View <code>QUERY</code> search results.</dd>

<dt><kbd>v n</kbd> (<code>telega-view-nearby</code>)</dt><dd>View contacts and chats nearby <code>telega-my-location</code>.</dd>

<dt><kbd>v v</kbd> (<code>telega-view-reset</code>)</dt><dd>Reset rootview to the default value.</dd>

<dt><kbd>v 0</kbd> (<code>telega-view-compact</code>)</dt><dd>Compact view for the rootbuf.</dd>

<dt><kbd>v 1</kbd> (<code>telega-view-one-line</code>)</dt><dd>View chat list as one line.</dd>

<dt><kbd>v 2</kbd> (<code>telega-view-two-lines</code>)</dt><dd>View chat list as 2 lines.</dd>

<dt><kbd>v t</kbd> (<code>telega-view-topics</code>)</dt><dd><p>
Group chats by <code>telega-root-view-topics</code>.
</p>

<p>
Customizable options:
</p>
<ul class="org-ul">
<li><p>
User Option: <code>telega-root-view-topics</code> 
</p>

<p>
Alist of topics for "topics" root view.
Car is name of the topic, cdr is chat filter to match chats. 
</p>

<p>
Default value: <code>(("Important" . important))</code>
</p></li>
<li><p>
User Option: <code>telega-root-view-topics-folders</code> 
</p>

<p>
Non-nil to add Chat Folders to the list of topics.
Could be one of <code>prepend</code>, <code>append</code> or nil. 
</p>

<p>
Default value: <code>append</code>
</p></li>
<li><p>
User Option: <code>telega-root-view-topics-other-chats</code> 
</p>

<p>
Non-nil to show other chats in the "topics" root view. 
</p>

<p>
Default value: <code>t</code>
</p></li>
</ul></dd>

<dt><kbd>v F</kbd> (<code>telega-view-files</code>)</dt><dd><p>
View status of files known to telega.
File can be in one of the state kinds: "downloading", "uploading",
"partially-downloaded", "partially-uploaded", "downloaded".
If <kbd>C-u</kbd> is specified, then query user about file
state kinds to show. By default all kinds are shown.
</p>

<p>
If you use this view frequently, consider setting
<code>telega-chat-upload-attaches-ahead</code> to nil, to avoid file
duplications for "uploading" kind. See
<a href="https://github.com/tdlib/td/issues/1348#issuecomment-752654650">https://github.com/tdlib/td/issues/1348#issuecomment-752654650</a>
for details
</p>

<p>
Press <kbd>d</kbd> under downloaded filename to delete the
file.  Only files cached by TDLib in the <code>telega-cache-dir</code>
can be deleted.
</p>

<p>
Customizable options:
</p>
<ul class="org-ul">
<li><p>
User Option: <code>telega-root-view-files-exclude-subdirs</code> 
</p>

<p>
Alist specifying which subdirs to exclude when viewing files.
car of each element is predicate matching file, and rest is list of
subdirectories to ignore, i.e. if absolute file name contains any of
the subdirectory in list, then file is ignored.
Supported predicates: <code>telega-file--downloading-p</code>,
<code>telega-file--uploading-p</code>, <code>telega-file--downloaded-p</code>,
<code>telega-file--uploaded-p</code>, <code>telega-file--partially-downloaded-p</code>,
<code>telega-file--partially-uploaded-p</code> 
</p>

<p>
Default value: <code>((telega-file--downloaded-p "thumbnails" "profile_photos"))</code>
</p></li>
<li><p>
User Option: <code>telega-chat-upload-attaches-ahead</code> 
</p>

<p>
Non-nil to upload attachments ahead, before message actually sent.
Having this non-nil "speedups" uploading, it is like files uploads instantly. 
</p>

<p>
Default value: <code>t</code>
</p></li>
</ul></dd>

<dt><kbd>v T</kbd> (<code>telega-view-top</code>)</dt><dd><p>
View top chats in all categories.
</p>

<p>
Customizable options:
</p>
<ul class="org-ul">
<li><p>
User Option: <code>telega-root-view-top-categories</code> 
</p>

<p>
List of top categories with limits. 
</p>

<p>
Default value: 
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">((<span style="font-style: italic;">"Users"</span> . 10)
 (<span style="font-style: italic;">"Groups"</span> . 10)
 (<span style="font-style: italic;">"Channels"</span> . 10)
 (<span style="font-style: italic;">"Bots"</span> . 10)
 (<span style="font-style: italic;">"InlineBots"</span> . 10)
 (<span style="font-style: italic;">"Calls"</span> . 10)
 (<span style="font-style: italic;">"ForwardChats"</span> . 10))
</pre>
</div></li>
</ul></dd>
</dl>


<dl class="org-dl">
<dt><kbd>v S</kbd> (<code>telega-view-settings</code>)</dt><dd>View and edit your Telegram settings.</dd>

<dt><kbd>v c</kbd> (<code>telega-view-contacts</code>)</dt><dd>View contacts searched by <code>QUERY</code>.
If <code>QUERY</code> is empty string, then show all contacts.</dd>

<dt><kbd>v C</kbd>, <kbd>c l</kbd> (<code>telega-view-calls</code>)</dt><dd>View calls.
If <kbd>C-u</kbd> is given, then view missed calls only.</dd>

<dt><kbd>v l</kbd> (<code>telega-view-last-messages</code>)</dt><dd>View last messages in the chats.</dd>

<dt><kbd>v f</kbd> (<code>telega-view-folders</code>)</dt><dd>View Telegram folders.</dd>

<dt><kbd>v d</kbd> (<code>telega-view-deleted-chats</code>)</dt><dd>View recently deleted chats.</dd>

<dt><kbd>v *</kbd> (<code>telega-view-favorite-messages</code>)</dt><dd>View favorite messages in all the chats.</dd>
</dl>

<p>
Important customizable options:
</p>
<ul class="org-ul">
<li><p>
User Option: <code>telega-root-default-view-function</code> 
</p>

<p>
Default view for the rootbuf. 
</p>

<p>
Default value: <code>telega-view-default</code>
</p>

<p>
<kbd>v v</kbd> (<code>telega-view-reset</code>) uses this
function to reset root view.
</p></li>
</ul>
</div>
</div>

<div id="outline-container-voicevideo-calls" class="outline-3">
<h3 id="voicevideo-calls"><a class="self-link" href="#voicevideo-calls"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Voice/Video calls</h3>
<div class="outline-text-3" id="text-voicevideo-calls">
<p>
Telegram provides nice voice/video calls.
</p>

<p>
<b><b>TODO</b></b> more documentation about voice/video calls support by
<code>telega</code>.
</p>

<p>
<kbd>c</kbd> prefix in rootbuf is used to call VoIP commands:
</p>
<dl class="org-dl">
<dt><kbd>c c</kbd> (<code>telega-chat-call</code>)</dt><dd>Call to the user associated with the given private <code>CHAT</code>.</dd>

<dt><kbd>c a</kbd> (<code>telega-voip-accept</code>)</dt><dd>Accept last incoming <code>CALL</code>.
Discard active call if any.</dd>

<dt><kbd>c d</kbd> (<code>telega-voip-discard</code>)</dt><dd>Discard the <code>CALL</code>.
If called interactively then discard active call.</dd>

<dt><kbd>c b</kbd> (<code>telega-voip-buffer-show</code>)</dt><dd>Show callbuf for the CALL.</dd>

<dt><kbd>v C</kbd>, <kbd>c l</kbd> (<code>telega-view-calls</code>)</dt><dd>View calls.
If <kbd>C-u</kbd> is given, then view missed calls only.</dd>
</dl>
</div>
</div>
</div>

<div id="outline-container-telega-match-expressions" class="outline-2">
<h2 id="telega-match-expressions"><a class="self-link" href="#telega-match-expressions"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Telega Match Expressions</h2>
<div class="outline-text-2" id="text-telega-match-expressions">
<p>
Telega Match Expression (temex in short) is a verbal expression to
match TDLib objects.  Temex uses S-exp notation similar to <code>rx</code>
package for regexps.
</p>

<p>
Primitive Temex is a named predicate returning non-nil if matches
some object.  Primitive Temexes can be combined using <code>and</code>, <code>or</code>
or <code>not</code> temexes, so temex is a logical combination of other
temexes down to Primitive Temexes.
</p>

<p>
<code>telega-match-gen-predicate</code> can be used to generate predicate
functions out of temex.
</p>

<p>
Chat Temex examples:
</p>
<dl class="org-dl">
<dt><code>(return t)</code></dt><dd>Matches all chats.</dd>

<dt><code>(or saved-messages (type channel bot))</code></dt><dd>Matches bots/channels chats or "Saved Messages" chat.</dd>

<dt><code>(and unmuted (unread 10) (mention 1))</code></dt><dd>Matches unmuted chats with at least 10 unread messages and at
least one message with unread mention.</dd>
</dl>

<p>
Message Temex examples:
</p>
<dl class="org-dl">
<dt><code>(sender me)</code></dt><dd>Matches all messages sent by me.</dd>

<dt><code>(or (prop :contains_unread_mention) unread-reactions)</code></dt><dd>Matches messages containing unread mention or reaction.</dd>

<dt><code>(and (chat (type channel)) (type text) (contains "\shello\s"))</code></dt><dd>Matches channel's text messages containing "hello" word.</dd>
</dl>

<p>
List of temexes you can apply to any TDLib object:
</p>

<dl class="org-dl">
<dt>(return <code>RET</code>)</dt><dd>Matches if <code>RET</code> is non-nil and return <code>RET</code> as a result.</dd>

<dt>(eval <code>SEXP</code>)</dt><dd>Matches if <code>SEXP</code> evaluates to non-nil, return result of evaluation.</dd>

<dt>(or <code>TEMEX-LIST</code>&#x2026;)</dt><dd>Matches if any matcher in the <code>TEMEX-LIST</code> matches.</dd>

<dt>(and <code>TEMEX-LIST</code>&#x2026;)</dt><dd>Matches if all matchers in the <code>TEMEX-LIST</code> matches.
Also matches if <code>TEMEX-LIST</code> is empty.</dd>

<dt>(not <code>TEMEX</code>)</dt><dd>Matches if <code>TEMEX</code> does not match.</dd>

<dt>(prop <code>PROPERTY</code>)</dt><dd>Matches if given TDLib object has non-nil <code>PROPERTY</code>.</dd>

<dt>(call <code>PREDICATE</code>)</dt><dd>Matches if <code>PREDICATE</code> called with TDLib object as argument returns non-nil.</dd>

<dt>(ids <code>ID-LIST</code>&#x2026;)</dt><dd>Matches if TDLib object's id is in the <code>ID-LIST</code>.</dd>
</dl>
</div>

<div id="outline-container-list-of-chat-temexes" class="outline-3">
<h3 id="list-of-chat-temexes"><a class="self-link" href="#list-of-chat-temexes"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>List of Chat Temexes</h3>
<div class="outline-text-3" id="text-list-of-chat-temexes">
<p>
Use <code>telega-chat-match-p</code> to match a chat.
</p>

<dl class="org-dl">
<dt>(type <code>CHAT-TYPE-LIST</code>), <kbd>/ t</kbd> (<code>telega-filter-by-type</code>)</dt><dd><p>
Matches if chat type is one of <code>CHAT-TYPE-LIST</code>.
</p>

<p>
Every chat has a type.  Type is one of:
</p>
<ul class="org-ul">
<li><code>private</code> Private chat with a Telegram user</li>
<li><code>secret</code> Secret chat with a Telegram user</li>
<li><code>bot</code> Chat with a Telegram bot</li>
<li><code>basicgroup</code> Small chat group, could be upgraded to supergroup</li>
<li><code>supergroup</code> Chat group with all the chat possibilities</li>
<li><code>channel</code> Supergroup with unlimited members, where only admins can post messages</li>
</ul></dd>

<dt>(name <code>REGEXP</code>)</dt><dd>Matches if chat's title matches <code>REGEXP</code>.</dd>

<dt>(search <code>QUERY</code>), <kbd>/ s</kbd> (<code>telega-filter-by-search</code>)</dt><dd>Matches if chat maches search QUERY.</dd>

<dt>nearby, <kbd>/ n</kbd> (<code>telega-filter-by-nearby</code>)</dt><dd>Matches if chat is nearby <code>telega-my-location</code>.</dd>

<dt>(custom <code>NAME</code>), <kbd>/ C</kbd> (<code>telega-filter-by-custom</code>)</dt><dd>Matches if custom filter with <code>NAME</code> matches.</dd>

<dt>(has-username [ <code>USERNAME</code> ])</dt><dd>Matches if chat has username associated with the chat.
If <code>USERNAME</code> is specified, then match only if chat has exact <code>USERNAME</code>.</dd>

<dt>is-public</dt><dd>Matches if chat is a public chat.
Chat is considered public if it has a username.</dd>

<dt>(unread [ <code>N</code> ]), <kbd>/ u</kbd> (<code>telega-filter-by-unread</code>)</dt><dd>Matches if chat has at least <code>N</code> unread messages.
By default <code>N</code> is 1.
Also matches chats marked as unread.</dd>

<dt>(mention [ <code>N</code> ]), <kbd>/ m</kbd> (<code>telega-filter-by-mention</code>)</dt><dd>Matches if chat has least <code>N</code> unread mentions.
By default <code>N</code> is 1.</dd>

<dt>muted</dt><dd>Matches if chat has disabled notifications.</dd>

<dt>temporary-muted</dt><dd>Matches if chat is temporary muted.</dd>

<dt>unmuted, <kbd>/ y</kbd> (<code>telega-filter-by-unmuted</code>)</dt><dd>Matches if chat has enabled notifications.</dd>

<dt>important, <kbd>/ i</kbd> (<code>telega-filter-by-important</code>)</dt><dd>Matches if chat is important.
Chat is important if it matches <code>telega-important-chat-temex</code> chat filter.</dd>

<dt>(me-is-owner [ <code>OR-ADMIN</code> ])</dt><dd>Matches if me is owner of the chat.
Only basicgroup, supergroup and channel can be owned.
If optional <code>OR-ADMIN</code> is specified, then match also if me is
administrator in the chat.</dd>

<dt>me-is-member</dt><dd>Matches if me is member of the chat.
Matches only basicgroup, supergroup or a channel.</dd>

<dt>me-is-anonymous</dt><dd>Matches if me is anonymous in the chat.</dd>

<dt>(no term)</dt><dd>(has-avatar [ <code>ANIMATED-P</code> ])::
Matches if chat has chat photo.
For non-nil <code>ANIMATED-P</code> match only if avatar is animated.</dd>

<dt>has-chatbuf, <kbd>/ b</kbd> (<code>telega-filter-by-has-chatbuf</code>)</dt><dd>Matches if chat has corresponding chatbuf.</dd>

<dt>(permission <code>PERM</code>)</dt><dd>Matches if chat has <code>PERM</code> set in chat permissions.
<code>PERM</code> could be one of listed in <code>telega-chat--chat-permissions</code>.</dd>

<dt>(my-permission <code>PERM</code>)</dt><dd>Matches if me has <code>PERM</code> permission in the chat.
<code>PERM</code> could be one of in <code>telega-chat--chat-permissions</code> list or in
<code>telega-chat--admin-permissions</code> list.</dd>

<dt>verified, <kbd>/ v</kbd> (<code>telega-filter-by-verified</code>)</dt><dd>Matches if chat is verified.</dd>

<dt>(restriction <code>SUFFIX-LIST</code>&#x2026;), <kbd>/ r</kbd> (<code>telega-filter-by-restriction</code>)</dt><dd><p>
Matches restricted chats.
<code>SUFFIX-LIST</code> is a list of suffixes to filter on.
Suffix can be one of:
</p>
<ul class="org-ul">
<li>"-all"      - All platforms</li>
<li>"-ios"      - For iOS devices</li>
<li>"-android"  - For Android devices</li>
<li>"-wp"       - Windows?</li>
</ul>

<p>
If <code>SUFFIX-LIST</code> is not specified, then match any restriction reason.
</p>

<p>
Chat restriction reason reported only if chat must be restricted
by current client.  See
<a href="https://github.com/tdlib/td/issues/1203">TDLib#1203</a>
</p></dd>

<dt>top, <kbd>/ T</kbd> (<code>telega-filter-by-top</code>)</dt><dd>Matches if chat is in top usage.</dd>

<dt>saved-messages</dt><dd>Matches only "Saved Messages" chat.</dd>

<dt>replies-messages</dt><dd>Matches only "Replies" chat.</dd>

<dt>tracking, <kbd>/ SPC</kbd> (<code>telega-filter-by-tracking</code>)</dt><dd>Matches if chat is in tracking buffers list.</dd>

<dt>(no term)</dt><dd>(last-message <code>MSG-TEMEX</code>)::
Matches if chat has last message and last message matches <code>MSG-TEMEX</code>.</dd>

<dt>(chat-list <code>LIST-NAME</code>), <kbd>/ f</kbd> (<code>telega-filter-by-folder</code>)</dt><dd>Matches if chat is in chat list named <code>LIST-NAME</code>.
<code>LIST-NAME</code> is <code>main</code> or <code>archive</code> symbol, or string naming Chat Folder.</dd>

<dt>main</dt><dd>Matches if chat from "Main" chat list.</dd>

<dt>archive</dt><dd>Matches if chat is archived, i.e. in "Archive" chat list.</dd>

<dt>is-known</dt><dd>Matches if chat is known, i.e. in "Main" or "Archive" chat list.</dd>

<dt>(folder <code>FOLDER-NAME</code>), <kbd>/ f</kbd> (<code>telega-filter-by-folder</code>)</dt><dd>Matches if chat belongs to Folder named <code>FOLDER-NAME</code>.</dd>

<dt>has-scheduled-messages</dt><dd>Matches if chat has scheduled messages.</dd>

<dt>has-action-bar</dt><dd>Matches if chat has active action bar.</dd>

<dt>has-reply-markup</dt><dd>Matches if chat has reply markup message.</dd>

<dt>can-get-statistics</dt><dd>Matches if statistics available for the chat.</dd>

<dt>has-linked-chat</dt><dd>Matches if chat is a supergroup and has a linked chat.</dd>

<dt>has-discussion-group</dt><dd>Matches if chat is a channel with a linked discussion group.</dd>

<dt>has-location</dt><dd>Matches if chat is a location-based supergroup.</dd>

<dt>inactive-supergroups ,  (<code>telega-filter-by-inactive-supergroups</code>)</dt><dd>Matches if chat is an inactive supergroup.</dd>

<dt>default-disable-notification</dt><dd>Matches if <code>CHAT</code> has non-nil default disable notification setting.</dd>

<dt>fake-or-scam</dt><dd>Matches if chat is fake or scam user or group.</dd>

<dt>(has-video-chat [ <code>NON-EMPTY</code> ])</dt><dd>Matches if chat contains a live video chat.
If non-nil <code>NON-EMPTY</code> is specified, then match only if video chat is
not empty.</dd>

<dt>has-favorite-messages</dt><dd>Matches if chat has favorite messages.</dd>

<dt>has-message-ttl</dt><dd>Matches if chat has enabled message auto-delete or self-destruct timer.
Return auto-deletion timer value.</dd>

<dt>is-broadcast-group</dt><dd>Matches if chat is a broadcast group.</dd>

<dt>is-forum</dt><dd>Matches if chat is a forum group.</dd>

<dt>has-sponsored-messages</dt><dd>Matches if chat has sponsored messages.
BE AWARE: This filter will do blocking request for every chat.</dd>

<dt>has-protected-content</dt><dd>Matches if chat has protected content.</dd>

<dt>has-default-sender</dt><dd>Matches if chat allows choosing a message sender.</dd>

<dt>can-send-or-post</dt><dd>Matches if you can send or post messages to the chat.
You don't need te be a chat member to be able to send messages.
Chat might not be known (i.e. in your Main or Archive list) to post
messages into it. Use <code>is-known</code> chat temex to check chat is known.</dd>

<dt>is-inline-bot</dt><dd>Matches if corresponding bot accepts inline requests.</dd>

<dt>(unread-reactions [ <code>N</code> ])</dt><dd>Matches if chat has least <code>N</code> unread reactions.
By default <code>N</code> is 1.</dd>

<dt>(has-active-stories [ <code>UNREAD-P</code> ])</dt><dd>Matches if chat has non-expired stories available to you.
If <code>UNREAD-P</code> is non-nil then match only if there is at least one unread
non-expired story.</dd>

<dt>(active-stories-list <code>LIST</code>)</dt><dd>Matches if chat's active stories belongs to <code>LIST</code>.
<code>LIST</code> is one of <code>main</code> or <code>archive</code>.</dd>

<dt>has-pinned-stories</dt><dd>Matches if channel chat has pinned stories.</dd>

<dt>can-send-stories</dt><dd>Matches if you can post a story into chat.</dd>

<dt>(user <code>USER-TEMEX</code>)</dt><dd>Matches non-bot private chat where corresponding user matches <code>USER-TEMEX</code>.</dd>

<dt>(bot-user <code>USER-TEMEX</code>)</dt><dd>Matches chat where corresponding bot user matches <code>USER-TEMEX</code>.</dd>

<dt>(is-blocked [ <code>BLOCK-LIST</code> ])</dt><dd>Matches chat if chat is blocked in by the <code>BLOCK-LIST</code>.
<code>BLOCK-LIST</code> is one of <code>blockListMain</code> or <code>blockListStories</code>.
By default <code>blockListMain</code> is used.</dd>
</dl>
</div>
</div>

<div id="outline-container-list-of-message-temexes" class="outline-3">
<h3 id="list-of-message-temexes"><a class="self-link" href="#list-of-message-temexes"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>List of Message Temexes</h3>
<div class="outline-text-3" id="text-list-of-message-temexes">
<p>
Use <code>telega-msg-match-p</code> to match a message.
</p>

<dl class="org-dl">
<dt>(type <code>MSG-TYPE-LIST</code>)</dt><dd><p>
Matches if message's content type is one of <code>MSG-TYPE-LIST</code>.
</p>

<p>
Every message has a content type.  Most notable message types
are: <code>Text</code>, <code>Animation</code>, <code>Audio</code>, <code>Document</code>, <code>Photo</code>,
<code>Sticker</code>, <code>Video</code>, <code>VideoNote</code>, <code>VoiceNote</code>, <code>Location</code>, etc.
</p></dd>

<dt>seen</dt><dd>Return non-nil if message has been viewed in the chat.</dd>

<dt>(unread-reactions [ <code>N</code> ])</dt><dd>Matches if message has at least <code>N</code> unread reactions.
By default <code>N</code> is 1.</dd>

<dt>has-chosen-reaction</dt><dd>Matches if message has a reaction chosen by me.</dd>

<dt>is-reply-to-msg</dt><dd>Matches if message is a reply to some message.</dd>

<dt>is-reply-to-story</dt><dd>Matches if message is a reply to a story.</dd>

<dt>post-with-comments</dt><dd>Matches if message is a channel post that can be commented.</dd>

<dt>is-topic</dt><dd>Matches if message is a forum topic message.</dd>

<dt>is-thread</dt><dd>Matches if message belongs to or starts a messages thread.</dd>

<dt>(web-page [ <code>PROPNAME</code> ])</dt><dd>Matches messages with a webpage preview.
If <code>PROPNAME</code> is specified, then match only message with a webpage
having <code>PROPNAME</code> property.</dd>

<dt>(outgoing [ <code>ANY-STATE-P</code> ])</dt><dd>Matches if message is an outgoing message.
This temex differs from <code>(sender me)</code>, matching any outgoing messages,
including anonymous messages to channels created by me.</dd>

<dt>(ignored [ <code>REASON</code> ])</dt><dd>Matches if message is an ignored message.
If <code>REASON</code> is specified, then match only if has been ignored by <code>REASON</code>
function.</dd>

<dt>(contains <code>REGEXP</code> )</dt><dd>Matches if message's text or caption contains <code>REGEXP</code>.
Matching ignores case.</dd>

<dt>(chat <code>CHAT-TEMEX</code>)</dt><dd>Matches if message's chat matches <code>CHAT-TEMEX</code>.</dd>

<dt>(sender <code>SENDER-TEMEX</code>)</dt><dd>Matches if message's sender matches <code>SENDER-TEMEX</code>.</dd>

<dt>is-deleted</dt><dd>Matches deleted message.</dd>

<dt>is-last</dt><dd>Matches if message is the last message in chat.</dd>
</dl>
</div>
</div>

<div id="outline-container-list-of-user-temexes" class="outline-3">
<h3 id="list-of-user-temexes"><a class="self-link" href="#list-of-user-temexes"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>List of User Temexes</h3>
<div class="outline-text-3" id="text-list-of-user-temexes">
<p>
Use <code>telega-user-match-p</code> to match a user.
</p>

<dl class="org-dl">
<dt>is-deleted</dt><dd>Matches if user account is deleted.</dd>

<dt>is-bot</dt><dd>Matches if user is a bot.</dd>

<dt>(status <code>STATUS-LIST</code>&#x2026;)</dt><dd><p>
Matches if user status is one of <code>STATUS-LIST</code>.
</p>

<p>
Each element in <code>STATUS-LIST</code> is one of: "Online", "Offline",
"Recently", "LastWeek", "LastMonth" or "Empty"
</p></dd>

<dt>online</dt><dd><p>
Matches if user is online.
Does not match bots, because bots are always online.
</p>

<p>
Same as <code>(status "Online")</code> user temex.
</p></dd>

<dt>(contact [ <code>MUTUAL-P</code> ]), <kbd>/ c</kbd> (<code>telega-filter-by-contact</code>)</dt><dd>Matches if user is in my contacts list.
If <code>MUTUAL-P</code> is non-nil, then mach only if contact is mutual.</dd>

<dt>is-close-friend</dt><dd>Matches if user is my close friend.</dd>

<dt>has-pinned-stories</dt><dd>Matches if user has pinned stories.</dd>

<dt>(groups-in-common [ <code>N</code> ])</dt><dd>Matches if user has at least <code>N</code> groups in common with me.
By default <code>N</code> is 1.</dd>

<dt>is-telega-patron</dt><dd>Matches if corresponding user is a telega patron.</dd>

<dt>is-premium</dt><dd>Matches if corresponding user is a Telegram Premium user.</dd>

<dt>has-private-forwards</dt><dd>Matches if user can't be linked in forwarded messages.</dd>

<dt>has-emoji-status</dt><dd>Matches if corresponding user set his current emoji status.</dd>

<dt>(username [ <code>USERNAME-REGEXP</code> ])</dt><dd>Matches if user's username matches <code>USERNAME-REGEXP</code>.</dd>

<dt>(chat <code>CHAT-TEMEX</code>)</dt><dd>Matches if me has private chat with <code>USER</code> matching <code>CHAT-TEMEX</code>.</dd>

<dt>(is-blocked [ <code>BLOCK-LIST</code> ])</dt><dd>Matches user blocked by the <code>BLOCK-LIST</code>.
<code>BLOCK-LIST</code> is one of <code>blockListMain</code> or <code>blockListStories</code>.
By default <code>blockListMain</code> is used.</dd>
</dl>
</div>
</div>

<div id="outline-container-list-of-message-sender-temexes" class="outline-3">
<h3 id="list-of-message-sender-temexes"><a class="self-link" href="#list-of-message-sender-temexes"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>List of Message Sender Temexes</h3>
<div class="outline-text-3" id="text-list-of-message-sender-temexes">
<p>
Use <code>telega-sender-match-p</code> to match a message sender.
</p>

<dl class="org-dl">
<dt>me</dt><dd>Matches if sender is me.</dd>

<dt>(is-blocked [ <code>BLOCK-LIST</code> ])</dt><dd>Matches if sender is blocked in the <code>BLOCK-LIST</code>.
<code>BLOCK-LIST</code> is one of <code>blockListMain</code>, <code>blockListStories</code>.
By default <code>blockListMain</code> is used.</dd>

<dt>(user <code>USER-TEMEX</code>)</dt><dd>Matches if sender is a user matching <code>USER-TEMEX</code>.</dd>

<dt>(chat <code>CHAT-TEMEX</code>)</dt><dd>Matches if sender is a chat matching <code>CHAT-TEMEX</code>.</dd>
</dl>
</div>
</div>

<div id="outline-container-list-of-forum-topic-temexes" class="outline-3">
<h3 id="list-of-forum-topic-temexes"><a class="self-link" href="#list-of-forum-topic-temexes"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>List of Forum Topic Temexes</h3>
<div class="outline-text-3" id="text-list-of-forum-topic-temexes">
<p>
Use <code>telega-topic-match-p</code> to match a forum's topic.
</p>

<dl class="org-dl">
<dt>(last-message <code>MSG-TEMEX</code>)</dt><dd>Matches if topic's last message matches <code>MSG-TEMEX</code>.</dd>

<dt>(mention [ <code>N</code> ])</dt><dd>Matches if topic has least <code>N</code> unread mentions.
By default <code>N</code> is 1.</dd>

<dt>(unread-reactions [ <code>N</code> ])</dt><dd>Matches if topic has least <code>N</code> unread reactions.
By default <code>N</code> is 1.</dd>

<dt>muted</dt><dd>Matches if topic has disabled notifications.</dd>

<dt>temporary-muted</dt><dd>Matches if topic is temporary muted.</dd>

<dt>(creator <code>SENDER-TEMEX</code>)</dt><dd>Matches if topic's creator matches <code>SENDER-TEMEX</code>.</dd>

<dt>(chat <code>CHAT-TEMEX</code>)</dt><dd>Matches if topic's chat matches <code>CHAT-TEMEX</code>.</dd>

<dt>is-general</dt><dd>Matches if topic is a general topic in a chat.</dd>

<dt>is-outgoing</dt><dd>Matches if topic has been created by me.</dd>

<dt>is-closed</dt><dd>Matches if topic is closed.</dd>

<dt>is-hidden</dt><dd>Matches if topic is hidden.
for General topic only.</dd>

<dt>is-most-recent</dt><dd>Matches if last message in the chat is made to topic.</dd>
</dl>
</div>
</div>

<div id="outline-container-list-of-story-temexes" class="outline-3">
<h3 id="list-of-story-temexes"><a class="self-link" href="#list-of-story-temexes"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>List of Story Temexes</h3>
<div class="outline-text-3" id="text-list-of-story-temexes">
<p>
Story Temexes are used to match Telegram Stories posted by users or
channels.
</p>

<p>
Use <code>telega-story-match-p</code> to match a story.
</p>

<dl class="org-dl">
<dt>(chat <code>CHAT-TEMEX</code>)</dt><dd>Matches if story is sent by CHAT matching <code>CHAT-TEMEX</code>.</dd>

<dt>(contains <code>REGEXP</code>)</dt><dd>Matches if story's caption contains <code>REGEXP</code>.</dd>

<dt>seen</dt><dd>Matches if story has been viewed.</dd>

<dt>is-video</dt><dd>Matches if story has video content.</dd>

<dt>is-photo</dt><dd>Matches if story has photo content.</dd>
</dl>
</div>
</div>

<div id="outline-container-customizable-options-making-use-of-telega-match-expressions" class="outline-3">
<h3 id="customizable-options-making-use-of-telega-match-expressions"><a class="self-link" href="#customizable-options-making-use-of-telega-match-expressions"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Customizable options making use of Telega Match Expressions</h3>
<div class="outline-text-3" id="text-customizable-options-making-use-of-telega-match-expressions">
<ul class="org-ul">
<li><p>
User Option: <code>telega-filter-default</code> 
</p>

<p>
Temex to filter chats by default. 
</p>

<p>
Default value: <code>main</code>
</p></li>
<li><p>
User Option: <code>telega-filters-custom</code> 
</p>

<p>
Alist of custom filters in form (NAME . TEMEX).
NAME can be an i18n string, such as "lng<sub>filters</sub><sub>type</sub><sub>groups</sub>".
This filters are displayed as filter buttons at the top of rootbuf. 
</p>

<p>
Default value: 
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">((<span style="font-style: italic;">"Main"</span> . main)
 (<span style="font-style: italic;">"Important"</span> . important)
 (<span style="font-style: italic;">"Online"</span> and
  (not saved-messages)
  (user is-online))
 (<span style="font-style: italic;">"lng_filters_type_groups"</span> type basicgroup supergroup)
 (<span style="font-style: italic;">"lng_filters_type_channels"</span> type channel)
 (<span style="font-style: italic;">"lng_filters_type_no_archived"</span> . archive))
</pre>
</div></li>

<li><p>
User Option: <code>telega-use-tracking-for</code> 
</p>

<p>
Specifies Chat Temex for chats to be tracked with tracking.el.
Make sure you have tracking.el loaded if this option is used.
Only chats with corresponding opened chatbuf are tracked.
Tracking notifications for telega buffers will use the
`telega-tracking` face. 
</p>

<p>
Default value: <code>nil</code>
</p></li>
<li><p>
User Option: <code>telega-rainbow-color-custom-for</code> 
</p>

<p>
List of custom colors for chats.
Each element is cons cell, where car is Chat Filter, and cdr is color. 
</p>

<p>
Default value: <code>((saved-messages))</code>
</p></li>
<li><p>
User Option: <code>telega-chat-prompt-format</code> 
</p>

<p>
Modeline compatible format for the chatbuf input prompt.
You can use <code>telega-chatbuf-editing-msg</code> or
<code>telega-chatbuf-replying-msg</code> in <code>:eval</code> section if you want different
prompt when editing/replying a message. 
</p>

<p>
Default value: 
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">((<span style="font-weight: bold;">:eval</span>
  (telega-chatbuf-prompt-default-sender-avatar))
 (<span style="font-weight: bold;">:eval</span>
  (telega-chatbuf-prompt-body))
 (<span style="font-weight: bold;">:eval</span>
  (<span style="font-weight: bold;">when</span>
      (<span style="font-weight: bold;">and</span> telega-use-images
       (telega-chatbuf-match-p 'can-send-or-post))
    (telega-chatbuf-prompt-chat-avatar)))
 (<span style="font-weight: bold;">:eval</span>
  (telega-chatbuf-prompt-topic 25))
 (<span style="font-weight: bold;">:eval</span>
  (telega-auto-translate--chatbuf-prompt-translation))
 <span style="font-style: italic;">"&gt;&gt;&gt; "</span>)
</pre>
</div></li>

<li><p>
User Option: <code>telega-chat-group-messages-for</code> 
</p>

<p>
Chat Filter for chats where to group messages by sender. 
</p>

<p>
Default value: 
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(not
 (<span style="font-weight: bold;">or</span> saved-messages
     (type channel bot)))
</pre>
</div></li>

<li><p>
User Option: <code>telega-chat-show-deleted-messages-for</code> 
</p>

<p>
Chat Filter for chats where to show deleted messages in chatbuf. 
</p>

<p>
Default value: <code>nil</code>
</p></li>
<li><p>
User Option: <code>telega-chat-use-date-breaks-for</code> 
</p>

<p>
Chat Filter for chats where to insert date breaks.
Date break is a special mark separating two messages received on
different days. Such as:
</p>
<pre class="example" id="org034ec10">
MSG1                              &lt;--- msg sent on 27dec
-------(28 December 2020)------   &lt;--- date break
MSG2                              &lt;--- msg sent on 28dec
</pre>

<p>
Default value: <code>all</code>
</p></li>
<li><p>
User Option: <code>telega-root-view-topics</code> 
</p>

<p>
Alist of topics for "topics" root view.
Car is name of the topic, cdr is chat filter to match chats. 
</p>

<p>
Default value: <code>(("Important" . important))</code>
</p></li>
</ul>
</div>
</div>
</div>

<div id="outline-container-chat-folders" class="outline-2">
<h2 id="chat-folders"><a class="self-link" href="#chat-folders"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Chat Folders</h2>
<div class="outline-text-2" id="text-chat-folders">
<p>
<a href="https://telegram.org/blog/folders">Telegram has added</a> a new
feature that allows users to organise chats into Chat Folders.
</p>

<p>
Each folder can have unlimited number of pinned chats.
</p>

<p>
Before Telegram had support for Chat Folders, <code>telega</code> implemented
custom chat label feature, resembling Chat Folders functionality.
But now custom chat label feature is deprecated in favor to Chat
Folders.  Use <kbd>M-x telega-folders-migrate-custom-labels RET</kbd> to migrate your custom labels into Chat Folders.
</p>

<p>
<kbd>F</kbd> prefix in rootbuf is used to operate on Chat Folders:
</p>
<dl class="org-dl">
<dt><kbd>F +</kbd> (<code>telega-folder-create</code>)</dt><dd>Create new Telegram folder with name <code>FOLDER-NAME</code>.</dd>

<dt><kbd>F -</kbd> (<code>telega-folder-delete</code>)</dt><dd>Delete Telegram folder with <code>FOLDER-NAME</code>.
This won't delete any chat, just a folder.</dd>

<dt><kbd>F =</kbd> (<code>telega-folders-reorder</code>)</dt><dd>Reorder Telegram folders to be in <code>ORDERED-FOLDER-NAMES</code> order.</dd>

<dt><kbd>F R</kbd> (<code>telega-folder-rename</code>)</dt><dd>Assign new name and icon to the folder with <code>FOLDER-NAME</code>.</dd>

<dt><kbd>F I</kbd> (<code>telega-folder-set-icon</code>)</dt><dd>For folder with <code>FOLDER-NAME</code> set new icon to <code>NEW-ICON-NAME</code>.</dd>

<dt><kbd>F a</kbd> (<code>telega-chat-add-to-folder</code>)</dt><dd>Add <code>CHAT</code> to the Telegram folder named <code>FOLDER-NAME</code>.
You can add chat to multiple folders.</dd>

<dt><kbd>F d</kbd> (<code>telega-chat-remove-from-folder</code>)</dt><dd>Remove <code>CHAT</code> from the folder named <code>FOLDER-NAME</code>.</dd>
</dl>

<p>
Customizable options for Chat Folders:
</p>
<ul class="org-ul">
<li><p>
User Option: <code>telega-root-view-topics-folders</code> 
</p>

<p>
Non-nil to add Chat Folders to the list of topics.
Could be one of <code>prepend</code>, <code>append</code> or nil. 
</p>

<p>
Default value: <code>append</code>
</p></li>

<li><p>
User Option: <code>telega-folder-icons-alist</code> 
</p>

<p>
Alist of symbols to be used as folder icons instead of <code>telega-symbol-folder</code>.
See list of all available icon names in <code>telega-folder-icon-names</code>. 
</p>

<p>
Default value: 
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">((<span style="font-style: italic;">"All"</span> . <span style="font-style: italic;">"&#128172;"</span>)
 (<span style="font-style: italic;">"Unread"</span> . <span style="font-style: italic;">"&#9989;"</span>)
 (<span style="font-style: italic;">"Unmuted"</span> . <span style="font-style: italic;">"&#128276;"</span>)
 (<span style="font-style: italic;">"Bots"</span> . <span style="font-style: italic;">"&#129302;&#65039;"</span>)
 (<span style="font-style: italic;">"Channels"</span> . <span style="font-style: italic;">"&#128226;"</span>)
 (<span style="font-style: italic;">"Groups"</span> . <span style="font-style: italic;">"&#128101;"</span>)
 (<span style="font-style: italic;">"Private"</span> . <span style="font-style: italic;">"&#128100;"</span>)
 (<span style="font-style: italic;">"Setup"</span> . <span style="font-style: italic;">"&#128203;"</span>)
 (<span style="font-style: italic;">"Cat"</span> . <span style="font-style: italic;">"&#128049;"</span>)
 (<span style="font-style: italic;">"Crown"</span> . <span style="font-style: italic;">"&#128081;"</span>)
 (<span style="font-style: italic;">"Favorite"</span> . <span style="font-style: italic;">"&#11088;&#65039;"</span>)
 (<span style="font-style: italic;">"Flower"</span> . <span style="font-style: italic;">"&#127801;"</span>)
 (<span style="font-style: italic;">"Game"</span> . <span style="font-style: italic;">"&#127918;"</span>)
 (<span style="font-style: italic;">"Home"</span> . <span style="font-style: italic;">"&#127968;"</span>)
 (<span style="font-style: italic;">"Love"</span> . <span style="font-style: italic;">"&#10084;&#65039;"</span>)
 (<span style="font-style: italic;">"Mask"</span> . <span style="font-style: italic;">"&#127917;"</span>)
 (<span style="font-style: italic;">"Party"</span> . <span style="font-style: italic;">"&#127864;"</span>)
 (<span style="font-style: italic;">"Sport"</span> . <span style="font-style: italic;">"&#9917;&#65039;"</span>)
 (<span style="font-style: italic;">"Study"</span> . <span style="font-style: italic;">"&#127891;"</span>)
 (<span style="font-style: italic;">"Trade"</span> . <span style="font-style: italic;">"&#128202;"</span>)
 (<span style="font-style: italic;">"Travel"</span> . <span style="font-style: italic;">"&#128747;&#65039;"</span>)
 (<span style="font-style: italic;">"Work"</span> . <span style="font-style: italic;">"&#128188;"</span>)
 (<span style="font-style: italic;">"Airplane"</span> . <span style="font-style: italic;">"&#9992;&#65039;&#65039;"</span>)
 (<span style="font-style: italic;">"Book"</span> . <span style="font-style: italic;">"&#128214;"</span>)
 (<span style="font-style: italic;">"Like"</span> . <span style="font-style: italic;">"&#128077;"</span>)
 (<span style="font-style: italic;">"Money"</span> . <span style="font-style: italic;">"&#128176;"</span>)
 (<span style="font-style: italic;">"Note"</span> . <span style="font-style: italic;">"&#128466;&#65039;"</span>))
</pre>
</div></li>
</ul>


<ul class="org-ul">
<li><p>
User Option: <code>telega-chat-folder-format</code> 
</p>

<p>
Non-nil to prefix chat's title with chat folder.
%I - Replaced with folder's icon from <code>telega-folder-icon-names</code> or
     empty string if there is no icon.
%i - Replaced with folder's icon from <code>telega-folder-format</code> or
     <code>telega-symbol-folder</code> if there is no icon.
%f - Replaced with folder's title.
%F - Replaced with folder's icon from <code>telega-folder-icon-names</code>
     if icon is unique, or equivalent to %I%f. 
</p>

<p>
Default value: 
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">#(<span style="font-style: italic;">"%F | "</span> 0 5
  (face bold))
</pre>
</div></li>
</ul>


<ul class="org-ul">
<li><p>
User Option: <code>telega-chat-folders-exclude</code> 
</p>

<p>
Exclude these folders when determining chat's folder.
When determining which chat folder to use in
<code>telega-chat-folders-format</code>, these folders are excluded, if
single folder is left, then it is used in the formatting. 
</p>

<p>
Default value: <code>("Unread" "Personal")</code>
</p></li>

<li><p>
User Option: <code>telega-filter-custom-show-folders</code> 
</p>

<p>
Non-nil to show telegram folders along the side with custom filters. 
</p>

<p>
Default value: <code>t</code>
</p></li>
</ul>
</div>
</div>

<div id="outline-container-filtering-chats" class="outline-2">
<h2 id="filtering-chats"><a class="self-link" href="#filtering-chats"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Filtering chats</h2>
<div class="outline-text-2" id="text-filtering-chats">
<p>
Chat Filters are used to match chats, same as regexps are used to
match strings.  Chat Filters uses S-exp notation similar to <code>rx</code>
package for regexps.  Consider Chat Filters as extremely powerful
"Folders" functionality in official client.
</p>

<p>
Primitive Chat Filter is a specifier to match some property of the
chat.  Each primitive Chat Filter has name (elisp symbol) and
corresponding function named <code>telega--filter-&lt;FILTER-NAME&gt;</code>.
You can specify primitive Chat Filter in either way:
</p>
<ol class="org-ol">
<li><code>&lt;FILTER-NAME&gt;</code></li>
<li><code>( &lt;FILTER-NAME&gt; &lt;ARG1&gt; [&lt;ARG2&gt; ...] )</code></li>
</ol>

<p>
Primitive Chat Filters are combined using <code>and</code>, <code>or</code> and <code>not</code>
filters, forming final Chat Filter.  So Chat Filter is a logical
combination of other Chat Filters, down to primitive Chat Filters.
</p>

<p>
Chat Filter examples:
</p>
<dl class="org-dl">
<dt><code>(return t)</code></dt><dd>Matches all chats</dd>

<dt><code>(or saved-messages (type channel bot))</code></dt><dd>Matches bots/channels chats or "Saved Messages" chat</dd>

<dt><code>(and unmuted (unread 10) (mention 1))</code></dt><dd>Matches unmuted chats with at least 10 unread messages and at
least one message with unread mention</dd>
</dl>

<p>
Matching is done using <code>telega-chat-match-p</code> function.
</p>

<p>
<kbd>/</kbd> prefix in rootbuf is used for some useful filtering
commands:
</p>

<dl class="org-dl">
<dt><kbd>/ i</kbd> (<code>telega-filter-by-important</code>)</dt><dd>Filter important chats.</dd>
<dt><kbd>/ o</kbd> (<code>telega-filter-by-online-status</code>)</dt><dd>Filter private chats by its user online <code>STATUS</code>.</dd>
<dt><kbd>/ a</kbd> (<code>telega-filter-by-filter</code>)</dt><dd>Interactively select a Chat filter to add to active filter.</dd>
<dt><kbd>/ e</kbd>, <kbd>/ :</kbd> (<code>telega-filters-edit</code>)</dt><dd>Edit and reapply filters list.</dd>
<dt><kbd>/ DEL</kbd>, <kbd>/ d</kbd> (<code>telega-filters-pop-last</code>)</dt><dd>Pop last <code>N</code> filters.</dd>
<dt><kbd>/ !</kbd> (<code>telega-filters-negate</code>)</dt><dd>Negate last filter.
If <kbd>C-u</kbd> is specified, then negate whole active filter.</dd>
<dt><kbd>/ /</kbd> (<code>telega-filters-reset</code>)</dt><dd>Reset active filter to the <code>telega-filter-default</code>.</dd>
</dl>

<p>
For other chat filtering bindings see <a href="#list-of-chat-temexes">List of Chat Temexes</a>
</p>
</div>
</div>

<div id="outline-container-sorting-chats" class="outline-2">
<h2 id="sorting-chats"><a class="self-link" href="#sorting-chats"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Sorting chats</h2>
<div class="outline-text-2" id="text-sorting-chats">
<p>
It is possible to sort chats in rootbuf out of Telega built-in
order.  Sorting chats is done by some criteria.  Built-in criterias
are in <code>telega-sort-criteria-alist</code>.  Do not insert criterias
directly into <code>telega-sort-criteria-alist</code>, use
<code>define-telega-sorter</code> instead.
</p>

<p>
<kbd>\</kbd> prefix in rootbuf is used for sorting commands:
</p>

<dl class="org-dl">
<dt><kbd>\ \</kbd> (<code>telega-sort-reset</code>)</dt><dd><p>
Reset active sorter.
</p>

<p>
It is possible to add multiple criteria using <code>telega-sort-reset</code>
with prefix argument <kbd>C-u</kbd>.
</p></dd>

<dt><kbd>\ s</kbd>, <kbd>\ a</kbd> (<code>telega-sort-by-sorter</code>)</dt><dd><p>
Interactively add <code>CRITERIA</code> to active sorter.
If prefix <code>ARG</code> is used, then add sort criteria, instead of
overwriting currently active one.
</p>

<p>
Use this command to reset active sorter.
</p></dd>
</dl>

<p>
For other sorting keybindings see below.
</p>
</div>

<div id="outline-container-sorting-criteria" class="outline-3">
<h3 id="sorting-criteria"><a class="self-link" href="#sorting-criteria"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Sorting criteria</h3>
<div class="outline-text-3" id="text-sorting-criteria">
<dl class="org-dl">
<dt><code>unread-count</code>, <kbd>\ u</kbd> (<code>telega-sort-by-unread-count</code>)</dt><dd>Sort chats by number of unread messages in chat.</dd>

<dt><code>title</code>, <kbd>\ t</kbd> (<code>telega-sort-by-title</code>)</dt><dd><p>
Sort chats alphabetically by chat title.
</p>

<p>
Thanks to <a href="https://t.me/Kurvivor">https://t.me/Kurvivor</a>
</p></dd>

<dt><code>member-count</code>, <kbd>\ m</kbd> (<code>telega-sort-by-member-count</code>)</dt><dd>Sort chats by number of members in the chat.</dd>

<dt><code>online-members</code>, <kbd>\ o</kbd> (<code>telega-sort-by-online-members</code>)</dt><dd>Sort chats by number of online members.</dd>

<dt><code>join-date</code>, <kbd>\ j</kbd> (<code>telega-sort-by-join-date</code>)</dt><dd>Sort chats by join date.  Last joined chats goes first.</dd>

<dt><code>chatbuf-recency</code>, <kbd>\ v</kbd> (<code>telega-sort-by-chatbuf-recency</code>)</dt><dd>Sort chats by chatbuf recency.  Recently used chats goes first.</dd>

<dt><code>chatbuf-visibility</code></dt><dd>Sort chats by visibility in other window in DWIM style.
See <a href="https://github.com/zevlg/telega.el/issues/165">https://github.com/zevlg/telega.el/issues/165</a></dd>

<dt><code>nearby-distance</code></dt><dd>Sort chats by nearby distance to me.
See <a href="https://github.com/zevlg/telega.el/issues/165">https://github.com/zevlg/telega.el/issues/165</a></dd>

<dt><code>chats-in-common</code></dt><dd>Sort by number of chats in common.
See <a href="https://github.com/zevlg/telega.el/issues/218">https://github.com/zevlg/telega.el/issues/218</a></dd>

<dt><code>last-seen</code></dt><dd>Sort by last seen activity.
For private chats user's last seen date is taken.
For other chats date of the last message is taken.</dd>
</dl>
</div>
</div>

<div id="outline-container-customizable-options-making-use-of-sorting-criteria" class="outline-3">
<h3 id="customizable-options-making-use-of-sorting-criteria"><a class="self-link" href="#customizable-options-making-use-of-sorting-criteria"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Customizable options making use of sorting criteria</h3>
<div class="outline-text-3" id="text-customizable-options-making-use-of-sorting-criteria">
<ul class="org-ul">
<li><p>
User Option: <code>telega-chat-completing-sort-criteria</code> 
</p>

<p>
Criteria to sort chats in <code>telega-completing-read-chat</code>. 
</p>

<p>
Default value: <code>(chatbuf-visibility chatbuf-recency)</code>
</p></li>
<li><p>
User Option: <code>telega-chat-switch-buffer-sort-criteria</code> 
</p>

<p>
Criteria to sort open chats when switching with <code>telega-switch-buffer</code>. 
</p>

<p>
Default value: <code>chatbuf-recency</code>
</p></li>
</ul>
</div>
</div>
</div>

<div id="outline-container-chat-buffer" class="outline-2">
<h2 id="chat-buffer"><a class="self-link" href="#chat-buffer"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Chat buffer</h2>
<div class="outline-text-2" id="text-chat-buffer">
<p>
Chatbuf is a Emacs buffer showing some Telegram chat.  Chatbuf
consists of a list of chat messages and an input for your messages
to send.  Press
<kbd>i</kbd>, <kbd>&lt;down-mouse-3&gt; &lt;describe&gt;</kbd> (<code>telega-describe-message</code>) to
get detailed description of the message at point.
</p>

<p>
<code>visual-line-mode</code> and <code>visual-fill-column-mode</code> are enabled by
default in chat buffers, to word-wrap and fill message content. You
might want to tune <code>visual-fill-column-extra-text-width</code> custom
option if message's header does not fit into
<code>telega-chat-fill-column</code> for some reason.
</p>

<p>
Avoid setting <code>truncate-lines</code> to non-nil value in the chatbufs
(and using modes that does so), unless you know what you are doing,
you will get confusing results.
</p>

<p>
Note for
<a href="https://en.wikipedia.org/wiki/Right-to-left_script">RTL</a> users:
unlike rootbuf, chatbufs disables bidirectional display reordering
by default, so RTL text will look reversed in chatbufs.  To enable
bidi in chatbufs customize your
<code>telega-chat-bidi-display-reordering</code> user option.
</p>

<p>
Important customizable options:
</p>
<ul class="org-ul">
<li><p>
User Option: <code>telega-chat-fill-column</code> 
</p>

<p>
Column to fill chat messages to. 
</p>

<p>
Default value: <code>70</code>
</p></li>
<li><p>
User Option: <code>telega-chat-use-date-breaks-for</code> 
</p>

<p>
Chat Filter for chats where to insert date breaks.
Date break is a special mark separating two messages received on
different days. Such as:
</p>
<pre class="example" id="org8f3762d">
MSG1                              &lt;--- msg sent on 27dec
-------(28 December 2020)------   &lt;--- date break
MSG2                              &lt;--- msg sent on 28dec
</pre>

<p>
Default value: <code>all</code>
</p></li>
</ul>
</div>

<div id="outline-container-chatbuf-fast-navigation" class="outline-3">
<h3 id="chatbuf-fast-navigation"><a class="self-link" href="#chatbuf-fast-navigation"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Chatbuf fast navigation</h3>
<div class="outline-text-3" id="text-chatbuf-fast-navigation">
<p>
<kbd>M-g</kbd> prefix in chatbuf is used to jump across various chat
messages:
</p>
<dl class="org-dl">
<dt><kbd>M-g !</kbd> (<code>telega-chatbuf-next-unread-reaction</code>)</dt><dd>Goto next unread reaction in chat buffer.</dd>

<dt><kbd>M-g d</kbd> (<code>telega-chatbuf-goto-date</code>)</dt><dd>Goto last message before <code>DATE</code> timestamp.</dd>

<dt><kbd>M-g &lt;</kbd> (<code>telega-chatbuf-history-beginning</code>)</dt><dd>Jump to the first message in the chat history.</dd>

<dt><kbd>M-g r</kbd>, <kbd>M-g &gt;</kbd> (<code>telega-chatbuf-read-all</code>)</dt><dd>Jump to the last message in the chat history and mark all messages as read.</dd>

<dt><kbd>M-g @</kbd>, <kbd>M-g m</kbd> (<code>telega-chatbuf-next-unread-mention</code>)</dt><dd>Goto next unread mention in chat buffer.
If there is no unread mentions, then search for last mention starting
from message at point.</dd>

<dt><kbd>M-g u</kbd> (<code>telega-chatbuf-next-unread</code>)</dt><dd>Goto next uneard message in chat.
<code>BUTTON-CALLBACK</code> - callback to call with single argument - message
button.</dd>

<dt><kbd>M-g ^</kbd>, <kbd>M-g P</kbd> (<code>telega-chatbuf-goto-pinned-message</code>)</dt><dd>Goto next pinned message for the chatbuffer.</dd>

<dt><kbd>M-g x</kbd> (<code>telega-chatbuf-goto-pop-message</code>)</dt><dd>Pop message from <code>telega-chatbuf--messages-pop-ring</code> and goto it.</dd>

<dt><kbd>M-g *</kbd> (<code>telega-chatbuf-next-favorite</code>)</dt><dd>Goto next favorite message.
See <a href="#favorite-messages">Favorite Messages</a> for details.</dd>

<dt><kbd>M-g v</kbd> (<code>telega-chatbuf-goto-video-chat</code>)</dt><dd>Goto video chat associated with the chat.
See <a href="#video-chats">Video Chats</a> for details.</dd>

<dt><kbd>M-g s</kbd> (<code>telega-chatbuf-inplace-search</code>)</dt><dd>Search backward in the chatbuf.
If <kbd>C-u</kbd> is given, then search forward instead.</dd>

<dt><kbd>M-g n</kbd> (<code>telega-chatbuf-inplace-search-next</code>)</dt><dd>Continue inplace searching with last search.</dd>

<dt><kbd>M-g p</kbd> (<code>telega-chatbuf-inplace-search-prev</code>)</dt><dd>Continue searching.</dd>
</dl>
</div>
</div>

<div id="outline-container-sending-ordinary-messages" class="outline-3">
<h3 id="sending-ordinary-messages"><a class="self-link" href="#sending-ordinary-messages"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Sending ordinary messages</h3>
<div class="outline-text-3" id="text-sending-ordinary-messages">
<p>
Type a text in the chatbuf input and press <kbd>RET</kbd> to send the
message.  To insert newline in the middle of the input use ordinary
<kbd>C-j</kbd> Emacs command.
</p>

<p>
You can apply markup to the input when sending message.  This is
controlled by number of <kbd>C-u</kbd> pressed before <kbd>RET</kbd>
and value of the:
</p>
<ul class="org-ul">
<li><p>
User Option: <code>telega-chat-input-markups</code> 
</p>

<p>
Markups to apply when sending input with <kbd>RET</kbd>.
Each index in the list corresponds to the number of
<kbd>C-u</kbd> supplied before <code>RET</code>, i.e. first element is
used for ordinary <code>RET</code>, second is used for <code>C-u RET</code>, and third is for
<code>C-u C-u RET</code> and so on.  Supported markups are defined in the
<code>telega-chat-markup-functions</code>.
</p>

<p>
"markdown1" syntax is not recommended, it always treats underscore
as starting point of italic emphasize even inside URLs, thats why
"markdown1" is not included into <code>telega-chat-input-markups</code> by
default. 
</p>

<p>
Default value: <code>(nil "markdown2" "org")</code>
</p></li>
</ul>

<p>
Markup syntax table:
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">&#xa0;</th>
<th scope="col" class="org-left">markdown2</th>
<th scope="col" class="org-left">org</th>
<th scope="col" class="org-left">markdown1</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><b>bold text</b></td>
<td class="org-left"><code>**bold text**</code></td>
<td class="org-left"><code>*bold text*</code></td>
<td class="org-left"><code>*bold text*</code></td>
</tr>

<tr>
<td class="org-left"><i>italic text</i></td>
<td class="org-left"><code>__italic text__</code></td>
<td class="org-left"><code>/italic text/</code></td>
<td class="org-left"><code>_italic text_</code></td>
</tr>

<tr>
<td class="org-left"><span class="underline">underline text</span></td>
<td class="org-left"><code>__underline text__</code></td>
<td class="org-left"><code>_underline text_</code></td>
<td class="org-left"><b><b>UNSUPPORTED</b></b></td>
</tr>

<tr>
<td class="org-left"><del>strike through</del></td>
<td class="org-left"><code>~~strike through~~</code></td>
<td class="org-left"><code>+strike through+</code></td>
<td class="org-left"><b><b>UNSUPPORTED</b></b></td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left"><code>Â¦Â¦spoilerÂ¦Â¦</code></td>
<td class="org-left"><code>Â¦Â¦spoilerÂ¦Â¦</code></td>
<td class="org-left"><b><b>UNSUPPORTED</b></b></td>
</tr>

<tr>
<td class="org-left"><code>inlined code</code></td>
<td class="org-left"><code>`inlined code`</code></td>
<td class="org-left"><code>~inlined code~</code></td>
<td class="org-left"><code>`inlined code`</code></td>
</tr>

<tr>
<td class="org-left"><code>pre text</code></td>
<td class="org-left"><code>```pre text```</code></td>
<td class="org-left"><code>=pre text=</code></td>
<td class="org-left"><b><b>UNSUPPORTED</b></b></td>
</tr>

<tr>
<td class="org-left"><a href="http://www.url">text</a></td>
<td class="org-left"><code>[text](http://www.url)</code></td>
<td class="org-left"><code>[[text][http://www.url]]</code></td>
<td class="org-left"><code>[text](http://www.url)</code></td>
</tr>

<tr>
<td class="org-left"><a href="http://t.me/user">name</a></td>
<td class="org-left"><code>[name](tg://user?id=&lt;USER-ID&gt;)</code></td>
<td class="org-left"><code>[[name][tg://user?id=&lt;USER-ID&gt;]]</code></td>
<td class="org-left"><code>[name](tg://user?id=&lt;USER-ID&gt;)</code></td>
</tr>
</tbody>
</table>

<p>
There is also "markdown1" syntax to insert multiline code blocks of
specified languge:
</p>
<pre class="example" id="org82da648">
```&lt;language-name&gt;
first line of multiline preformatted code
second line
last line```
</pre>

<p>
"markdown2" backquotes syntax to insert multiline code blocks is
controlled by:
</p>
<ul class="org-ul">
<li><p>
User Option: <code>telega-markdown2-backquotes-as-precode</code> 
</p>

<p>
Non-nil for markdown1 style syntax for ```.
Non-nil activates syntax:
  ```&lt;language-name&gt; (not displayed)
  code code
  ``` 
</p>

<p>
Default value: <code>known</code>
</p></li>
</ul>

<p>
Org syntax for code blocks is <b><b>NOT YET</b></b> supported:
</p>
<pre class="example" id="org909a67b">
#+begin_src &lt;language-name&gt;
code line
next code line
...
#+end_src
</pre>

<p>
Also, you can intermix various markups, using <kbd>C-c C-a markup RET</kbd> command.
</p>

<p>
Important customizable options:
</p>
<ul class="org-ul">
<li><p>
User Option: <code>telega-chat-input-markups</code> 
</p>

<p>
Markups to apply when sending input with <kbd>RET</kbd>. 
</p>

<p>
Default value: <code>(nil "markdown2" "org")</code>
</p></li>
<li><p>
User Option: <code>telega-chat-send-message-on-ret</code> 
</p>

<p>
Customization for <kbd>RET</kbd> behaviour. 
</p>

<p>
Default value: <code>always</code>
</p></li>
<li><p>
User Option: <code>telega-chat-markup-functions</code> 
</p>

<p>
List of markups to use on <code>C-c C-a markup RET</code>. 
</p>

<p>
Default value: 
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">((<span style="font-style: italic;">"markdown2"</span> . telega-markup-markdown2-fmt)
 (<span style="font-style: italic;">"org"</span> . telega-markup-org-fmt)
 (<span style="font-style: italic;">"html"</span> . telega-markup-html-fmt)
 (<span style="font-style: italic;">"markdown1"</span> . telega-markup-markdown1-fmt))
</pre>
</div></li>
</ul>
</div>
</div>


<div id="outline-container-attaching-media" class="outline-3">
<h3 id="attaching-media"><a class="self-link" href="#attaching-media"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Attaching media</h3>
<div class="outline-text-3" id="text-attaching-media">
<p>
You can attach various media into chatbuf input, using next bindings:
</p>
<dl class="org-dl">
<dt><kbd>C-c C-a</kbd> (<code>telega-chatbuf-attach</code>)</dt><dd>Attach something to the chatbuf input.
<kbd>C-u</kbd> is passed directly to the attachment function.
See <code>telega-chat-attach-commands</code> for available attachment types.</dd>

<dt><kbd>C-c C-f</kbd> (<code>telega-chatbuf-attach-media</code>)</dt><dd>Attach <code>FILENAME</code> as media, detecting media type by <code>FILENAME</code> extension.
If <kbd>C-u</kbd> is given, then attach as file.
If <code>AS-FILE-P</code> is <code>preview</code>, then attach as file with preview.  <code>FILENAME</code>
must be a photo in this case.</dd>

<dt><kbd>C-c C-v</kbd> (<code>telega-chatbuf-attach-clipboard</code>)</dt><dd>Attach clipboard image to the chatbuf as photo.
If <kbd>C-u</kbd> is given, then attach clipboard as document.</dd>
</dl>

<p>
Text following attached media will be a media caption.
</p>

<p>
Attachment types to attach with
<kbd>C-c C-a</kbd> (<code>telega-chatbuf-attach</code>) defined in
<code>telega-chat-attach-commands</code> user option:
</p>
<dl class="org-dl">
<dt>photo</dt><dd>Attach <code>FILENAME</code> as photo to the chatbuf input.</dd>
<dt>video</dt><dd>Attach <code>FILENAME</code> as video to the chatbuf input.</dd>
<dt>audio</dt><dd>Attach <code>FILENAME</code> as audio to the chatbuf input.</dd>
<dt>spoiler-photo</dt><dd>Attach photo marked with spoiler.</dd>
<dt>spoiler-video</dt><dd>Attach video marked with spoiler.</dd>
<dt>self-destruct-photo</dt><dd>Attach a file as self destructing photo.
This attachment can be used only in private chats.</dd>
<dt>self-destruct-video</dt><dd>Attach a file as self destructing video.
This attachment can be used only in private chats.</dd>
<dt>video-note</dt><dd>Attach a (circled) video note to the chatbuf input.
If <kbd>C-u</kbd> is given, then attach existing file as
video-note.  Otherwise record video note inplace.
<code>telega-vvnote-video-record-args</code> is used as arguments to ffmpeg to
record video notes.</dd>
<dt>voice-note</dt><dd>Attach a voice note to the chatbuf input.
If <kbd>C-u</kbd> is given, then attach existing file as
voice-note.  Otherwise record voice note inplace.
<code>telega-vvnote-voice-cmd</code> is used to record voice notes.</dd>
<dt>file</dt><dd>Attach <code>FILENAME</code> as document to the chatbuf input.
If <code>CONTENT-TYPE-DETECT-P</code> is specified, then FILENAME's content type is
automatically detected.</dd>
<dt>gif</dt><dd>Attach <code>GIF-FILE</code> as animation to the chatbuf input.</dd>
<dt>location</dt><dd>Attach location to the chatbuf input.
If <kbd>C-u</kbd> is given, then attach live location.</dd>
<dt>poll</dt><dd>Attach poll to the chatbuf input.
Can be used only in group chats.
<code>QUESTION</code> - Title of the poll.
<code>ANONYMOUS-P</code> - Non-nil to create anonymous poll.
<code>ALLOW-MULTIPLE-ANSWERS-P</code> - Non-nil to allow multiple answers.
<code>OPTIONS</code> - List of strings representing poll options.</dd>
<dt>contact</dt><dd>Attach <code>CONTACT</code> user to the chatbuf input.</dd>
<dt>sticker</dt><dd>Attach a sticker.
If <kbd>C-u</kbd> is given, then attach recent or
favorite sticker.  Otherwise choose a sticker from installed
sticker sets.</dd>
<dt>animation</dt><dd>Attach an animation.
If <kbd>C-u</kbd> is given, then attach animation from
a file, otherwise choose animation from list of saved animations.</dd>
<dt>dice</dt><dd>Attach random dice roll message.</dd>
<dt>screenshot</dt><dd>Attach screenshot to the chatbuf input.
If numeric prefix arg <code>N</code> is given, then take screenshot in <code>N</code> seconds.
If <kbd>C-u</kbd> is given, then take screenshot of the screen area.
Multiple <kbd>C-u</kbd> increases delay before taking
screenshot of the area.
Uses <code>telega-screenshot-function</code> to take a screenshot.</dd>
<dt>clipboard</dt><dd>Attach clipboard image to the chatbuf as photo.
If <kbd>C-u</kbd> is given, then attach clipboard as document.</dd>
<dt>markup</dt><dd>Attach <code>MARKUP-TEXT</code> using <code>MARKUP-NAME</code> into chatbuf.
Using this type of attachment it is possible to intermix multiple
markups in the chatbuf input.
Markups are defined in the <code>telega-chat-markup-functions</code> user option.</dd>
<dt>theme</dt><dd>Interactively attach new chat theme to the chat buffer.</dd>
<dt>scheduled</dt><dd>Mark content as scheduled.
Send following message at <code>TIMESTAMP</code>.
If <kbd>C-u</kbd> is given and chat is private and
online status of the corresponding user is known, then send
message when user gets online.</dd>
<dt>disable-notification</dt><dd>Toggle disable-notification chat option for the subsequent chatbuf input.
Use this attachment to disable/enable notification on the receiver side.</dd>
<dt>enable-notification</dt><dd>Toggle disable-notification chat option for the subsequent chatbuf input.
Use this attachment to disable/enable notification on the receiver side.</dd>
<dt>disable-webpage-preview</dt><dd>Disable webpage preview for the following text message.</dd>
<dt>send-by</dt><dd>Set sender for the following message.</dd>
<dt>custom-emoji</dt><dd>Interactively attach a custom emoji.</dd>
<dt>code</dt><dd>Interactively attach a code of the <code>LANGUAGE</code> into chatbuf input.
For non-interactive code attach, use <code>telega-mnz--chatbuf-attach-internal</code>.</dd>
</dl>

<p>
Special attachment types are <code>disable-webpage-preview</code>, <code>scheduled</code>,
<code>disable-notification</code> or <code>enable-notification</code>.  They do not attach
anything, but changes options on how to send the message.  Use
<code>scheduled</code> to <a href="#scheduling-messages-and-reminders">schedule messages</a>, <code>disable-notification</code> or
<code>enable-notification</code> to trigger notification on receiver side and
<code>disable-webpage-preview</code> to disable rich web page previews for URLs
in the message text.
</p>

<p>
Customizable options for attaching media:
</p>
<ul class="org-ul">
<li><p>
User Option: <code>telega-chat-upload-attaches-ahead</code> 
</p>

<p>
Non-nil to upload attachments ahead, before message actually sent.
Having this non-nil "speedups" uploading, it is like files uploads instantly. 
</p>

<p>
Default value: <code>t</code>
</p></li>
<li><p>
User Option: <code>telega-chat-markup-functions</code> 
</p>

<p>
List of markups to use on <code>C-c C-a markup RET</code>. 
</p>

<p>
Default value: 
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">((<span style="font-style: italic;">"markdown2"</span> . telega-markup-markdown2-fmt)
 (<span style="font-style: italic;">"org"</span> . telega-markup-org-fmt)
 (<span style="font-style: italic;">"html"</span> . telega-markup-html-fmt)
 (<span style="font-style: italic;">"markdown1"</span> . telega-markup-markdown1-fmt))
</pre>
</div></li>
</ul>
</div>
</div>


<div id="outline-container-replying-to-a-message" class="outline-3">
<h3 id="replying-to-a-message"><a class="self-link" href="#replying-to-a-message"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Replying to a message</h3>
<div class="outline-text-3" id="text-replying-to-a-message">
<p>
To reply to a message, put point on the message you want to reply to
and press <kbd>r</kbd>, <kbd>&lt;down-mouse-3&gt; &lt;reply&gt;</kbd> (<code>telega-msg-reply</code>).
</p>

<p>
Selected region at reply time will be a reply quote.
</p>

<p>
To cancel reply use
<kbd>C-c C-k</kbd>, <kbd>C-M-c</kbd>, <kbd>M-ESC</kbd> (<code>telega-chatbuf-cancel-dwim</code>)
binding. <kbd>C-u</kbd> prefix to this command will clear chatbuf's
input along with canceling reply.
</p>
</div>
</div>

<div id="outline-container-editing-previously-sent-message" class="outline-3">
<h3 id="editing-previously-sent-message"><a class="self-link" href="#editing-previously-sent-message"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Editing previously sent message</h3>
<div class="outline-text-3" id="text-editing-previously-sent-message">
<p>
To edit a given message, put point on the message you want to edit and
press <kbd>e</kbd>, <kbd>&lt;down-mouse-3&gt; &lt;edit&gt;</kbd> (<code>telega-msg-edit</code>).
</p>

<p>
To cancel editing use the same command as for canceling reply to a
message.
</p>

<p>
To edit your previously sent message press
<kbd>M-p</kbd> (<code>telega-chatbuf-edit-prev</code>).
</p>

<p>
It is possible to edit a message using markup syntax.
<kbd>e</kbd>, <kbd>&lt;down-mouse-3&gt; &lt;edit&gt;</kbd> (<code>telega-msg-edit</code>) accepts
<kbd>C-u</kbd> prefix to specify markup syntax to be used for editing.
</p>
</div>
</div>

<div id="outline-container-forwarding-messages" class="outline-3">
<h3 id="forwarding-messages"><a class="self-link" href="#forwarding-messages"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Forwarding messages</h3>
<div class="outline-text-3" id="text-forwarding-messages">
<p>
To forward a message, put cursor under the message which you want to
forward and press
<kbd>f</kbd> (<code>telega-msg-forward-marked-or-at-point</code>)
and then select a Chat to forward a message to.  To forward multiple
messages at once, mark messages with the
<kbd>m</kbd>, <kbd>&lt;down-mouse-3&gt; &lt;unmark&gt;</kbd>, <kbd>&lt;down-mouse-3&gt; &lt;mark&gt;</kbd> (<code>telega-msg-mark-toggle</code>) and then
press
<kbd>f</kbd> (<code>telega-msg-forward-marked-or-at-point</code>)
on one of the messages.
</p>

<p>
There are few options how you can affect the way a message is forwarded:
</p>
<ol class="org-ol">
<li><kbd>C-u f</kbd> to forward a message copy, it will look like <b>you</b>
sent a message.</li>
<li><kbd>C-u C-u f</kbd> To forward a message copy deleting or
replacing caption it has.  Use this to forward media message with
your own caption.</li>
</ol>
</div>
</div>

<div id="outline-container-deleting-messages" class="outline-3">
<h3 id="deleting-messages"><a class="self-link" href="#deleting-messages"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Deleting messages</h3>
<div class="outline-text-3" id="text-deleting-messages">
<p>
To delete a message, put cursor under the message you want to delete and press
<kbd>DEL</kbd>, <kbd>d</kbd>, <kbd>&lt;down-mouse-3&gt; &lt;delete&gt;</kbd> (<code>telega-msg-delete-marked-or-at-point</code>).
</p>

<p>
As with <a href="#forwarding-messages">forwarding messages</a>, you can mark multiple messages to delete
with <kbd>m</kbd>, <kbd>&lt;down-mouse-3&gt; &lt;unmark&gt;</kbd>, <kbd>&lt;down-mouse-3&gt; &lt;mark&gt;</kbd> (<code>telega-msg-mark-toggle</code>).
</p>

<p>
Also, you can ban/report message sender (and delete all messages from
this sender in the chat) with
<kbd>B</kbd>, <kbd>&lt;down-mouse-3&gt; &lt;ban-sender&gt;</kbd> (<code>telega-msg-ban-sender</code>) when
cursor is under the message.
</p>

<p>
<code>telega</code> can keep deleted messages visible until chatbuf is
killed. This is controlled using custom variable:
</p>

<ul class="org-ul">
<li><p>
User Option: <code>telega-chat-show-deleted-messages-for</code> 
</p>

<p>
Chat Filter for chats where to show deleted messages in chatbuf. 
</p>

<p>
Default value: <code>nil</code>
</p></li>
</ul>

<p>
For example, to show deleted messages in all chats except for "Saved
Messages", use next:
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> telega-chat-show-deleted-messages-for '(not saved-messages))
</pre>
</div>
</div>
</div>

<div id="outline-container-scheduling-messages-and-reminders" class="outline-3">
<h3 id="scheduling-messages-and-reminders"><a class="self-link" href="#scheduling-messages-and-reminders"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Scheduling messages and reminders</h3>
<div class="outline-text-3" id="text-scheduling-messages-and-reminders">
<p>
To schedule a message, press <kbd>C-c C-a scheduled RET</kbd>,
select date and time to schedule message at, type text of a message
and send it as always.
</p>

<p>
To reschedule a message, first list all scheduled messages in the chat
with <kbd>C-c / scheduled RET</kbd>, then press
<kbd>e</kbd>, <kbd>&lt;down-mouse-3&gt; &lt;edit&gt;</kbd> (<code>telega-msg-edit</code>) on the message
you want to reschedule, remove previous "Schedule" attachment and add
a new one at the beginning.
</p>

<p>
Message scheduled in "Saved Messages" chat is called reminder.
</p>

<p>
Whenever a scheduled message or reminder is sent, you get a special
notification marked with a ðŸ“…, so you don't get caught off-guard by
messages you planned in the past.
</p>
</div>
</div>

<div id="outline-container-navigating-previous-input" class="outline-3">
<h3 id="navigating-previous-input"><a class="self-link" href="#navigating-previous-input"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Navigating previous input</h3>
<div class="outline-text-3" id="text-navigating-previous-input">
<p>
You can navigate your previous chatbuf input using commands:
</p>
<dl class="org-dl">
<dt><kbd>M-p</kbd> (<code>telega-chatbuf-edit-prev</code>)</dt><dd>Edit previously sent message.
<code>MARKUP-ARG</code> could be used to select markup to edit message.
See <code>telega-msg-edit</code> for details.</dd>
<dt><kbd>M-n</kbd> (<code>telega-chatbuf-edit-next</code>)</dt><dd>Edit message sent next to currently editing.
<code>MARKUP-ARG</code> could be used to select markup to edit message.
See <code>telega-msg-edit</code> for details.</dd>
<dt><kbd>M-r</kbd> (<code>telega-chatbuf-input-search</code>)</dt><dd><p>
Search for REGEX in chat input history.
</p>

<p>
While searching input, you can use
<kbd>M-p</kbd> (<code>telega-chatbuf--input-search-input-prev</code>)
and
<kbd>M-n</kbd> (<code>telega-chatbuf--input-search-input-next</code>)
to cycle chatbuf input ring.
</p></dd>
</dl>
</div>
</div>

<div id="outline-container-completing-input-in-chatbuf" class="outline-3">
<h3 id="completing-input-in-chatbuf"><a class="self-link" href="#completing-input-in-chatbuf"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Completing input in chatbuf</h3>
<div class="outline-text-3" id="text-completing-input-in-chatbuf">
<p>
Powerful <code>company-mode</code> can be used to complete input in the chatbuf
with
<kbd>TAB</kbd> (<code>telega-chatbuf-complete-or-next-link</code>).
</p>

<p>
<code>telega</code> provides few company backends, such as:
</p>


<dl class="org-dl">
<dt>telega-company-emoji</dt><dd><p>
Complete emojis via <code>:&lt;emoji&gt;:</code>
syntax. Completion is done using predefined set of emojis.
</p>

<p>
Customizable Options:
</p>
<ul class="org-ul">
<li><p>
User Option: <code>telega-company-emoji-fuzzy-match</code> 
</p>

<p>
Non-nil to use fuzzy prefix matching.
For example without fuzzy matches, prefix <code>:jo</code> will match only
<code>:joy:</code>, <code>:joy-cat:</code> and <code>:joystick:</code>.  With fuzzy matching
enabled it will match also <code>:flag-jo:</code> and <code>:black-jocker:</code>. 
</p>

<p>
Default value: <code>t</code>
</p></li>
</ul></dd>
</dl>


<dl class="org-dl">
<dt>telega-company-telegram-emoji</dt><dd>Same as <code>telega-company-emoji</code>,
but uses Telegram cloud for the emojis completion.</dd>
</dl>


<dl class="org-dl">
<dt>telega-company-username</dt><dd>Complete user mentions via <code>@&lt;username&gt;</code>
syntax. Here is the screenshot, showing use of this backend:
<img src="https://zevlg.github.io/telega/completing-usernames.jpg" alt="completing-usernames.jpg" /></dd>
</dl>

<p>
Customizable options:
</p>
<ul class="org-ul">
<li><p>
User Option: <code>telega-company-username-prefer-name</code> 
</p>

<p>
Preferred formatting argument to the <code>telega-user-title</code> to complete user.
Frist giving non-nil result will be used. 
</p>

<p>
Default value: <code>(username first-name last-name)</code>
</p></li>
<li><p>
User Option: <code>telega-company-username-show-avatars</code> 
</p>

<p>
Non-nil to show avatars in the company annotation. 
</p>

<p>
Default value: <code>nil</code>
</p></li>
<li><p>
User Option: <code>telega-company-username-markup</code> 
</p>

<p>
Markup to use for usernames completion. 
</p>

<p>
Default value: <code>nil</code>
</p></li>
</ul>


<dl class="org-dl">
<dt>telega-company-hashtag</dt><dd>Complete common hashtags via
<code>#&lt;hashtag&gt;</code> syntax.</dd>
</dl>


<dl class="org-dl">
<dt>telega-company-botcmd</dt><dd>Complete bot commands via <code>/&lt;botcmd&gt;</code>
syntax.  This backend does not complete if <code>/&lt;botcmd&gt;</code> syntax is
used in the middle of the chatbuf input, only if <code>/&lt;botcmd&gt;</code>
starts chatbuf input.</dd>
</dl>


<dl class="org-dl">
<dt>telega-company-markdown-precode</dt><dd>Complete language name for
code blocks via <code>```</code> syntax.</dd>
</dl>

<p>
List of company backends to be used for user input completion is
controlled by:
</p>
<ul class="org-ul">
<li><p>
User Option: <code>telega-company-backends</code> 
</p>

<p>
Company backends to use in chat buffers.
Set to nil to disable company completions in chat buffers. 
</p>

<p>
Default value: <code>(telega-company-emoji telega-company-telegram-emoji telega-company-username telega-company-hashtag telega-company-markdown-precode telega-company-botcmd)</code>
</p></li>
</ul>

<p>
You can use completion without enabling <code>company-mode</code> in the chat
buffers, by explicitly pressing
<kbd>TAB</kbd> (<code>telega-chatbuf-complete-or-next-link</code>)
to perform completion at point.
</p>

<p>
On the other hand, <code>company-mode</code> detects input context and pops up
completion candidates if completion at point is available.  To enable
<code>company-mode</code> in chat buffers use:
</p>
<div class="org-src-container">
<pre class="src src-elisp">(add-hook 'telega-chat-mode-hook 'company-mode)
</pre>
</div>

<p>
Consider also using <code>company-posframe</code> Emacs package (in MELPA), so
chatbuf's contents remain untouched when completion menu pops above
the chatbuf prompt.
</p>

<p>
If you don't like <code>company-posframe</code>, consider option:
</p>
<ul class="org-ul">
<li><p>
User Option: <code>telega-company-tooltip-always-below</code> 
</p>

<p>
Non-nil to show company tooltip always below the point.
Done by recentering point in the chatbuf. 
</p>

<p>
Default value: <code>t</code>
</p></li>
</ul>
</div>

<div id="outline-container-using-capf-for-input-completions" class="outline-4">
<h4 id="using-capf-for-input-completions"><a class="self-link" href="#using-capf-for-input-completions"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Using capf for input completions</h4>
<div class="outline-text-4" id="text-using-capf-for-input-completions">
<p>
It is possible to use standard Emacs <code>capf</code> (completion at point)
functionality to perform completions in the chatbuf.  You still need
<code>company.el</code> package installed <b><b>and loaded</b></b> because <code>telega</code> uses it
as engine.
</p>

<p>
<code>capf</code> is used by default if <code>company-mode</code> is disabled in the
chatbuf, so to enable <code>capf</code> completions setup could look like:
</p>

<div class="org-src-container">
<pre class="src src-elisp">(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">my-telega-chat-mode</span> ()
  (<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">company</span>)
  (add-hook 'completion-at-point-functions
          #'telega-chatbuf-complete-at-point nil 'local)
  )

(add-hook 'telega-chat-mode-hook 'my-telega-chat-mode)
</pre>
</div>

<p>
<code>capf</code> functionality is very limited comparing to <code>company-mode</code>
completions, however, some users might still prefer <code>capf</code>.
</p>
</div>
</div>
</div>

<div id="outline-container-sending-messages-via-bots" class="outline-3">
<h3 id="sending-messages-via-bots"><a class="self-link" href="#sending-messages-via-bots"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Sending messages via bots</h3>
<div class="outline-text-3" id="text-sending-messages-via-bots">
<p>
If chatbuf input starts with <code>@&lt;botname&gt; &lt;query&gt;</code> and mentioned bot
support <a href="https://telegram.org/blog/inline-bots">inline mode</a>, then pressing
<kbd>TAB</kbd> (<code>telega-chatbuf-complete-or-next-link</code>)
will pop a special buffer with the inline results to the bot inline
<code>&lt;query&gt;</code>, you can use these results to send a message via bot.  Some
useful bots with <a href="https://telegram.org/blog/inline-bots">inline mode</a> support are:
</p>

<ul class="org-ul">
<li><a href="https://t.me/gif">@gif</a> To search and send animations</li>
<li><a href="https://t.me/pic">@pic</a>, <a href="https://t.me/bing">@bing</a> To search and send pictures</li>
<li><a href="https://t.me/vid">@vid</a> To search and send videos on YouTube</li>
<li><a href="https://t.me/foursquare">@foursquare</a> - To find and send places around the world</li>
<li>etc</li>
</ul>

<p>
To find out is some bot supports <a href="https://telegram.org/blog/inline-bots">inline mode</a> or not, enter
<code>@&lt;botname&gt;&lt;SPC&gt;</code> in chatbuf input and press
<kbd>TAB</kbd> (<code>telega-chatbuf-complete-or-next-link</code>).
If momentary help is displayed, then this bot supports inline mode.
</p>

<p>
Customizable options for inline bots:
</p>
<ul class="org-ul">
<li><p>
User Option: <code>telega-known-inline-bots</code> 
</p>

<p>
List of known bots for everyday use. 
</p>

<p>
Default value: <code>("@gif" "@youtube" "@pic")</code>
</p></li>

<li><p>
User Option: <code>telega-inline-query-window-select</code> 
</p>

<p>
Non-nil to select window with inline query results. 
</p>

<p>
Default value: <code>t</code>
</p></li>
</ul>
</div>
</div>

<div id="outline-container-filtering-chat-messages-aka-shared-media" class="outline-3">
<h3 id="filtering-chat-messages-aka-shared-media"><a class="self-link" href="#filtering-chat-messages-aka-shared-media"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Filtering chat messages a.k.a. Shared Media</h3>
<div class="outline-text-3" id="text-filtering-chat-messages-aka-shared-media">
<p>
Message filtering means to show only some messages matching filter.
Available message filters are: <code>scheduled</code>, <code>search</code>, <code>by-sender</code>, <code>hashtag</code>, <code>topic</code>, <code>photo</code>, <code>photo-video</code>, <code>url</code>, <code>doc</code>, <code>file</code>, <code>gif</code>, <code>audio</code>, <code>video</code>, <code>voice-note</code>, <code>video-note</code>, <code>voice-video-note</code>, <code>chat-photo</code>, <code>mention</code>, <code>unread-mention</code>, <code>unread-reaction</code>, <code>failed-to-send</code>, <code>pinned</code>
</p>

<p>
Chatbuf uses next bindings for message filtering:
</p>
<dl class="org-dl">
<dt><kbd>C-c /</kbd> (<code>telega-chatbuf-filter</code>)</dt><dd>Enable chat message filtering <code>MSG-FILTER</code>.</dd>

<dt><kbd>C-c C-c</kbd> (<code>telega-chatbuf-filter-cancel</code>)</dt><dd>Cancel current messages filtering.
If point is at some message, then keep point on this message after reseting.
If <kbd>C-u</kbd> is given, then cancel thread filtering as well.</dd>

<dt><kbd>C-c C-r</kbd> (<code>telega-chatbuf-inplace-search-query</code>)</dt><dd>Inplace search backward for the <code>QUERY</code>.
If <kbd>C-u</kbd> is given, search for the messages
containing <code>QUERY</code> sent by specified sender.
To navigate across searching results use
<kbd>M-g p</kbd> and
<kbd>M-g n</kbd>
bindings.</dd>

<dt><kbd>C-c C-s</kbd> (<code>telega-chatbuf-inplace-search-query-forward</code>)</dt><dd>Inplace search forward for the <code>QUERY</code>.
If <kbd>C-u</kbd> is given, search for the messages
containing <code>QUERY</code> sent by specified sender.</dd>
</dl>
</div>
</div>

<div id="outline-container-inplace-searching-in-text-messages-or-media-captions" class="outline-3">
<h3 id="inplace-searching-in-text-messages-or-media-captions"><a class="self-link" href="#inplace-searching-in-text-messages-or-media-captions"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Inplace searching in text messages or media captions</h3>
<div class="outline-text-3" id="text-inplace-searching-in-text-messages-or-media-captions">
<p>
Use
<kbd>C-c C-r</kbd> (<code>telega-chatbuf-inplace-search-query</code>)
or <kbd>C-c C-s</kbd> (<code>telega-chatbuf-inplace-search-query-forward</code>)
to start searching while keeping history without applied filter,
i.e. you can see surrounding messages.
</p>

<p>
Use <kbd>M-g s</kbd> (<code>telega-chatbuf-inplace-search</code>)
or
<kbd>M-g n</kbd> (<code>telega-chatbuf-inplace-search-next</code>)
to continue searching.
</p>
</div>
</div>

<div id="outline-container-opening-files-using-external-programs" class="outline-3">
<h3 id="opening-files-using-external-programs"><a class="self-link" href="#opening-files-using-external-programs"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Opening files using external programs</h3>
<div class="outline-text-3" id="text-opening-files-using-external-programs">
<p>
Document messages in Telegram has attached file in the message.  By
default <code>telega</code> opens that files inside Emacs using <code>find-file</code> function.  Sometimes that is not
desirable behaviour and you might want to open some files in external
application.  You can use <code>org-open-file</code> function for this.
Behaviour is controlled by:
</p>
<ul class="org-ul">
<li><p>
User Option: <code>telega-open-file-function</code> 
</p>

<p>
Function to use to open files associated with messages.
Called with single argument - filename to open.
Could be used to open files in external programs.
Set it to <code>org-open-file</code> to use Org mode to open files. 
</p>

<p>
Default value: <code>find-file</code>
</p></li>
</ul>

<p>
Setup to open some files in external applications might look like:
</p>
<div class="org-src-container">
<pre class="src src-emacslisp">;; ("\\.pdf\\'" . default) is already member in `org-file-apps'
;; Use "xdg-open" to open files by default
(setcdr (assq t org-file-apps-gnu) 'browse-url-xdg-open)

(setq telega-open-file-function 'org-open-file)
</pre>
</div>

<p>
On MacOS use <code>browse-url-default-macosx-browser</code> instead of
<code>browse-url-xdg-open</code>.
</p>

<p>
If you also want to open non-document messages as file using
<code>telega-open-file-function</code> consider:
</p>
<ul class="org-ul">
<li><p>
User Option: <code>telega-open-message-as-file</code> 
</p>

<p>
List of message types to open as file using <code>telega-open-file-function</code>.
Supported message types are: <code>photo</code>, <code>video</code>, <code>audio</code>,
<code>video-note</code>, <code>voice-note</code>, <code>animation</code>.
Document messages are always opens as file. 
</p>

<p>
Default value: <code>nil</code>
</p></li>
</ul>

<p>
Another alternative to open some files using external programs is to
use nice <code>openwith</code> Emacs package available in MELPA.
</p>

<p>
<b>Browse URL with custom function</b>
</p>

<p>
Also, you can open urls using custom functions:
</p>
<ul class="org-ul">
<li><p>
User Option: <code>telega-browse-url-alist</code> 
</p>

<p>
Alist of custom url browse functions.
Each element is in form: <code>(PREDICATE-OR-REGEX . FUNCTION)</code>. 
</p>

<p>
Default value: <code>nil</code>
</p></li>
</ul>

<p>
For example, to play youtube videos using <code>mpv</code> player, add this to config:
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">my-watch-in-mpv</span> (url)
  (async-shell-command (format <span style="font-style: italic;">"mpv -v %S"</span> url)))

(add-to-list 'telega-browse-url-alist
           '(<span style="font-style: italic;">"https?://</span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">(</span><span style="font-style: italic;">www\\.</span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">)</span><span style="font-style: italic;">?youtube.com/watch"</span> . my-watch-in-mpv))
(add-to-list 'telega-browse-url-alist
           '(<span style="font-style: italic;">"https?://youtu.be/"</span> . my-watch-in-mpv))
</pre>
</div>
</div>
</div>

<div id="outline-container-client-side-messages-ignoring" class="outline-3">
<h3 id="client-side-messages-ignoring"><a class="self-link" href="#client-side-messages-ignoring"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Client side messages ignoring</h3>
<div class="outline-text-3" id="text-client-side-messages-ignoring">
<p>
In official telegram clients all messages in group chats are displayed
even if message has been sent by blocked sender (user or chat).
<code>telega</code> has client side message ignoring feature implemented.
Ignoring messages can be done by adding function into
<code>telega-msg-ignore-predicates</code>.  This function must accept single
argument - message, and return non-nil if messages should be ignored.
You can use <code>telega-match-gen-predicate</code> to generate message
predicates out of <a href="#telega-match-expressions">Telega Match Expressions</a>.
For example, to ignore messages from particular user with <code>id=12345</code>
you could add next code:
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">my-telega-ignore-12345-user</span> (msg)
  (telega-msg-match-p msg '(sender (ids 12345))))

(add-hook 'telega-msg-ignore-predicates 'my-telega-ignore-12345-user)
</pre>
</div>

<p>
Or to ignore messages from blocked senders (users or chats), just add:
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(add-hook 'telega-msg-ignore-predicates
        (telega-match-gen-predicate 'msg '(sender is-blocked)))
</pre>
</div>

<p>
To view recently ignored messages use
<code>M-x telega-ignored-messages RET</code> command.
</p>
</div>
</div>

<div id="outline-container-favorite-messages" class="outline-3">
<h3 id="favorite-messages"><a class="self-link" href="#favorite-messages"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Favorite messages</h3>
<div class="outline-text-3" id="text-favorite-messages">
<p>
Any message in any chat can be marked with as <i>favorite</i>.  Favorite
messages are labeled with:
</p>
<ul class="org-ul">
<li><p>
User Option: <code>telega-symbol-favorite</code> 
</p>

<p>
Symbol to use for favorite messages, bookmarks. 
</p>

<p>
Default value: <code>"ðŸ”–"</code>
</p></li>
</ul>

<p>
To toggle message at point being favorite, press
<kbd>*</kbd>, <kbd>&lt;down-mouse-3&gt; &lt;rm-favorite&gt;</kbd>, <kbd>&lt;down-mouse-3&gt; &lt;add-favorite&gt;</kbd> (<code>telega-msg-favorite-toggle</code>).
</p>

<p>
To jump to next favorite message in the chat buffer press
<kbd>M-g *</kbd> (<code>telega-chatbuf-next-favorite</code>).
</p>

<p>
To view all favorite messages in all chats, enable "Favorite Messages"
Root View, by pressing
<kbd>v *</kbd> (<code>telega-view-favorite-messages</code>) in
the <a href="#root-buffer">root buffer</a>.
</p>
</div>
</div>

<div id="outline-container-media-controls-for-media-messages" class="outline-3">
<h3 id="media-controls-for-media-messages"><a class="self-link" href="#media-controls-for-media-messages"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Media Controls for media messages</h3>
<div class="outline-text-3" id="text-media-controls-for-media-messages">
<p>
Some media messages that are playing inside Emacs (such as "audio",
"voice-note" or "video-note" messages) will have additional media
control buttons to control media playback parameters:
</p>
<pre class="example" id="org17a60ff">
[âª] [â©] [2Ã—] [Stop] 
</pre>

<p>
For fast access to media controls you can you next bindings:
</p>
<dl class="org-dl">
<dt><kbd>0</kbd> (<code>telega-msg--vvnote-stop</code>)</dt><dd>Stop playing media message.</dd>
<dt><kbd>&lt;</kbd>, <kbd>,</kbd> (<code>telega-msg--vvnote-rewind-10-backward</code>)</dt><dd>Rewind 10 seconds backward.</dd>
<dt><kbd>&gt;</kbd>, <kbd>.</kbd> (<code>telega-msg--vvnote-rewind-10-forward</code>)</dt><dd>Rewind 10 seconds forward.</dd>
<dt><kbd>x</kbd> (<code>telega-msg--vvnote-play-speed-toggle</code>)</dt><dd>Toggle playback speed for the media message.
Only two modes are available: normal speed and x2 speed.</dd>
<dt><kbd>9</kbd>, <kbd>8</kbd>, <kbd>7</kbd>, <kbd>6</kbd>, <kbd>5</kbd>, <kbd>4</kbd>, <kbd>3</kbd>, <kbd>2</kbd>, <kbd>1</kbd> (<code>telega-msg--vvnote-rewind-part</code>)</dt><dd>Rewind to the N's 10 part of the message duration.
I.e. if you press 7, then you will jump to 70% of the message
duration.</dd>
</dl>

<p>
To play/pause media messages use <kbd>RET</kbd>.  Also,
<kbd>l</kbd>, <kbd>&lt;down-mouse-3&gt; &lt;copy-link&gt;</kbd> (<code>telega-msg-copy-link</code>) command
supports linking to the currently playing (or paused at) moment.
</p>

<p>
To reference a given moment in a media message (or in a reply to media
message) use <code>[HH:]MM:SS]</code> syntax in the message's body/caption.  Such
timestamp marks will be automatically emphasised with a media
timestamp text entity.
</p>
</div>
</div>

<div id="outline-container-forums-and-topics" class="outline-3">
<h3 id="forums-and-topics"><a class="self-link" href="#forums-and-topics"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Forums and Topics</h3>
<div class="outline-text-3" id="text-forums-and-topics">
<p>
Telegram allows creating forums with multiple distinct topics.  Use
<kbd>M-x telega-chat-create RET forum RET</kbd> to create forums.
</p>

<p>
NOTE: forums and topics are not fully supported by <code>telega</code> at moment.
</p>
</div>
</div>
</div>

<div id="outline-container-video-chats" class="outline-2">
<h2 id="video-chats"><a class="self-link" href="#video-chats"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Video Chats</h2>
<div class="outline-text-2" id="text-video-chats">
<p>
<b><b>TODO</b></b>: write me
</p>
</div>
</div>

<div id="outline-container-stickers--animations" class="outline-2">
<h2 id="stickers--animations"><a class="self-link" href="#stickers--animations"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Stickers / Animations</h2>
<div class="outline-text-2" id="text-stickers--animations">
<p>
To display stickers <code>telega</code> uses <code>dwebp</code> utility to convert <code>.webp</code>
stickers into png images that can be displayed by Emacs. <code>dwebp</code>
utility is available on almost every system inside <code>webp</code> package.
</p>

<p>
Important customizable options for stickers:
</p>
<ul class="org-ul">
<li><p>
User Option: <code>telega-sticker-size</code> 
</p>

<p>
Size for the sticker.
car is height in chars to use.
cdr is maximum width in chars to use. 
</p>

<p>
Default value: <code>(4 . 24)</code>
</p></li>
<li><p>
User Option: <code>telega-sticker-set-download</code> 
</p>

<p>
Non-nil to automatically download known sticker sets. 
</p>

<p>
Default value: <code>nil</code>
</p></li>
<li><p>
User Option: <code>telega-sticker-favorite-background</code> 
</p>

<p>
Background color for the favorite stickers.
Can be nil, in this case favorite stickers are not outlined. 
</p>

<p>
Default value: <code>"cornflower blue"</code>
</p></li>
</ul>

<p>
To play short animations inside Emacs <code>telega</code> uses <code>ffmpeg</code> utility.
Playing animations inside Emacs is a bit heavy process, so be careful
in choosing value for the <code>telega-animation-play-inline</code>.
</p>

<p>
Important customizable options for animations:
</p>
<ul class="org-ul">
<li><p>
User Option: <code>telega-animation-height</code> 
</p>

<p>
Height in chars for animations. 
</p>

<p>
Default value: <code>5</code>
</p></li>
<li><p>
User Option: <code>telega-animation-play-inline</code> 
</p>

<p>
Non-nil to play animation inside telega.
If number, then play animation inline only if animation is shorter
then this number of seconds. 
</p>

<p>
Default value: <code>10</code>
</p></li>
<li><p>
User Option: <code>telega-animation-download-saved</code> 
</p>

<p>
Non-nil to automatically download saved animations. 
</p>

<p>
Default value: <code>nil</code>
</p></li>
</ul>
</div>

<div id="outline-container-animated-stickers" class="outline-3">
<h3 id="animated-stickers"><a class="self-link" href="#animated-stickers"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Animated stickers</h3>
<div class="outline-text-3" id="text-animated-stickers">
<p>
<code>telega</code> supports animated stickers using <code>tgs2png</code> utility from
<a href="https://github.com/zevlg/tgs2png">https://github.com/zevlg/tgs2png</a>
</p>

<p>
Once <code>tgs2png</code> tool is installed into <code>exec-path</code> (check value for
<code>telega-sticker-animated-play</code> after <code>telega</code> is started), you can
play animated stickers by pressing <kbd>RET</kbd> on sticker.
</p>

<p>
Also <a href="#telega-autoplay-mode">telega-autoplay-mode</a> can be used, to automatically animate
messages containing animated stickers.
</p>
</div>
</div>

<div id="outline-container-favorite-and-recently-used-stickers" class="outline-3">
<h3 id="favorite-and-recently-used-stickers"><a class="self-link" href="#favorite-and-recently-used-stickers"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Favorite and recently used stickers</h3>
<div class="outline-text-3" id="text-favorite-and-recently-used-stickers">
<p>
To attach your favorite or rencetly used sticker use <kbd>C-u</kbd>
before <kbd>C-c C-a sticker RET</kbd>.  Background for favorite
stickers are filled with color:
</p>
<ul class="org-ul">
<li><p>
User Option: <code>telega-sticker-favorite-background</code> 
</p>

<p>
Background color for the favorite stickers.
Can be nil, in this case favorite stickers are not outlined. 
</p>

<p>
Default value: <code>"cornflower blue"</code>
</p></li>
</ul>

<p>
To toggle sticker being favorite, press
<kbd>*</kbd>, <kbd>f</kbd> (<code>telega-sticker-toggle-favorite</code>)
while point is under sticker in the <code>*Telega Sticker Set*</code> buffer.
</p>

<p>
Or you can press <kbd>S</kbd>, <kbd>&lt;down-mouse-3&gt; &lt;save&gt;</kbd> (<code>telega-msg-save</code>)
on the sticker message to add that sticker to the favorite stickers
list.
</p>
</div>
</div>

<div id="outline-container-animations" class="outline-3">
<h3 id="animations"><a class="self-link" href="#animations"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Animations</h3>
<div class="outline-text-3" id="text-animations">
<p>
There are multiple methods you can use to attach an animation:
</p>
<ul class="org-ul">
<li><kbd>C-c C-a animation RET</kbd> to attach animation from the Saved
Animations list.</li>
<li><kbd>C-c C-a gif RET</kbd> to attach animation from a <code>gif</code> or <code>mp4</code>
file.</li>
<li><a href="#sending-messages-via-bots">via @gif bot</a></li>
</ul>

<p>
To play animation message press <kbd>RET</kbd> on the message.  Also,
<a href="#telega-autoplay-mode">telega-autoplay-mode</a> can be used to automatically play animation
messages.
</p>

<p>
To explicitly add animation to Saved Animations list, press
<kbd>S</kbd>, <kbd>&lt;down-mouse-3&gt; &lt;save&gt;</kbd> (<code>telega-msg-save</code>) on the
corresponding animation message.
</p>
</div>
</div>
</div>

<div id="outline-container-multiple-accounts" class="outline-2">
<h2 id="multiple-accounts"><a class="self-link" href="#multiple-accounts"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Multiple accounts</h2>
<div class="outline-text-2" id="text-multiple-accounts">
<p>
<code>telega</code> support multiple accounts, however only single account can be
active, i.e. you can't run account simultaneously, but you can switch
between accounts.  Notifications won't work for inactive accounts.
</p>

<p>
To switch accounts use
<kbd>a</kbd> (<code>telega-account-switch</code>) from <a href="#telega-prefix-map">prefix
map</a>.  To setup multiple accounts use:
</p>

<ul class="org-ul">
<li><p>
User Option: <code>telega-accounts</code> 
</p>

<p>
List of the accounts to be used by telega.
Each element is a list in form:
(ACCOUNT-NAME CUSTOM-VAR1 VAL1 CUSTOM-VAR2 VAL2 &#x2026;).
At least <code>telega-database-dir</code> should be customized for each account. 
</p>

<p>
Default value: <code>nil</code>
</p>

<p>
For example:
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> telega-accounts (list
  (list <span style="font-style: italic;">"zevlg"</span> 'telega-database-dir telega-database-dir)
  (list <span style="font-style: italic;">"Evgen2"</span> 'telega-database-dir
    (expand-file-name <span style="font-style: italic;">"evgen2"</span> telega-database-dir))))
</pre>
</div>

<p>
Each account can have its own configuration using custom variables
specified in account setup, and only <code>telega-database-dir</code> must be
different for different accounts.
</p>

<p>
Uninitialized account from <code>telega-accounts</code> will be initialized when
you switch to it for the first time.
</p></li>
</ul>
</div>
</div>

<div id="outline-container-minor-modes" class="outline-2">
<h2 id="minor-modes"><a class="self-link" href="#minor-modes"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Minor Modes</h2>
<div class="outline-text-2" id="text-minor-modes">
<p>
<code>telega</code> ships with various minor modes you might consider to use.
</p>
</div>

<div id="outline-container-notifications-for-incoming-messages" class="outline-3">
<h3 id="notifications-for-incoming-messages"><a class="self-link" href="#notifications-for-incoming-messages"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Notifications for incoming messages</h3>
<div class="outline-text-3" id="text-notifications-for-incoming-messages">
<p>
<code>telega.el</code> can notify you about incoming messages and calls via
D-Bus notifications, however notifications are disabled by default.
</p>

<p>
Enable it with <code>(telega-notifications-mode 1)</code> or at <code>telega</code> load time:
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(add-hook 'telega-load-hook 'telega-notifications-mode)
</pre>
</div>

<p>
Message is triggered for messages matching:
</p>
<ul class="org-ul">
<li><p>
User Option: <code>telega-notifications-msg-temex</code> 
</p>

<p>
Message temex to match messages that needs to be notified. 
</p>

<p>
Default value: <code>(call telega-notifications-msg-notify-p)</code>
</p></li>
</ul>

<p>
You can use this option for custom notifications.  For example to
trigger notification for messages containing "keyword" (in addition to
default behaviour) you can set <code>telega-notifications-msg-temex</code> to
<code>(or (call telega-notifications-msg-notify-p) (contains "keyword"))</code>
</p>

<p>
By default notification triggers if
<code>telega-notifications-msg-notify-p</code> predicate returns non-nil.  It
returns non-nil if next conditions are satisfied.
</p>

<p>
Do <b>NOT</b> pop notification if:
</p>
<ol class="org-ol">
<li>Me is not member of the group chat, see
<a href="https://github.com/zevlg/telega.el/issues/224">https://github.com/zevlg/telega.el/issues/224</a></li>
<li>Message is ignored by
<a href="#client-side-messages-ignoring">client side messages ignoring</a></li>
<li>Chat is muted and message does not contain unread mention or
mention notification is disabled for the chat</li>
<li>Message already has been read (see <code>telega-msg-seen-p</code>)</li>
<li>Message is older than 1 min (to avoid popping up messages on
laptop wakeup)</li>
<li>Message is currently observable in a chatbuf, i.e. chatbuf
must be selected and focused.</li>
</ol>

<p>
To view recent notifications use
<code>M-x telega-notifications-history RET</code> command.
</p>

<p>
See also <a href="#telega-alertel--notifications-using-alertel">Notifications using alert.el</a>
</p>
</div>
</div>

<div id="outline-container-telega-mode-line-mode" class="outline-3">
<h3 id="telega-mode-line-mode"><a class="self-link" href="#telega-mode-line-mode"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>telega-mode-line-mode</h3>
<div class="outline-text-3" id="text-telega-mode-line-mode">
<p>
Global minor mode to display <code>telega</code> status in modeline.
</p>

<p>
Enable with <code>(telega-mode-line-mode 1)</code> or at <code>telega</code> load time:
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(add-hook 'telega-load-hook 'telega-mode-line-mode)
</pre>
</div>

<p>
Customizable options:
</p>

<ul class="org-ul">
<li><p>
User Option: <code>telega-mode-line-string-format</code> 
</p>

<p>
Format in mode-line-format for <code>telega-mode-line-string</code>. 
</p>

<p>
Default value: 
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-style: italic;">"   "</span>
 (<span style="font-weight: bold;">:eval</span>
  (telega-mode-line-icon))
 (<span style="font-weight: bold;">:eval</span>
  (car
   (telega-account-current)))
 (<span style="font-weight: bold;">:eval</span>
  (telega-mode-line-online-status))
 (<span style="font-weight: bold;">:eval</span>
  (<span style="font-weight: bold;">when</span> telega-use-tracking-for
    (telega-mode-line-tracking)))
 (<span style="font-weight: bold;">:eval</span>
  (telega-mode-line-unread-unmuted))
 (<span style="font-weight: bold;">:eval</span>
  (telega-mode-line-mentions 'messages))
 (<span style="font-weight: bold;">:eval</span>
  (telega-mode-line-active-video-chats)))
</pre>
</div></li>
</ul>
</div>
</div>


<div id="outline-container-telega-appindicator-mode" class="outline-3">
<h3 id="telega-appindicator-mode"><a class="self-link" href="#telega-appindicator-mode"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>telega-appindicator-mode</h3>
<div class="outline-text-3" id="text-telega-appindicator-mode">
<p>
Global minor mode to display <code>telega</code> status in system tray.  This
mode requires appindicator support in the <code>telega-server</code>.  To add
appindicator support to <code>telega-server</code>, please install
<code>libappindicator3-dev</code> or <code>libayatana-appindicator3-dev</code>
system package and rebuild <code>telega-server</code>
with {{{kbd(M-x telega-server-build RET}}}.
</p>

<p>
Screenshot of system tray with enabled <code>telega</code> appindicator:
<img src="https://zevlg.github.io/telega/screen-appindicator.png" alt="screen-appindicator.png" />
</p>

<p>
Enable with <code>(telega-appindicator-mode 1)</code> or at <code>telega</code> load time:
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(add-hook 'telega-load-hook 'telega-appindicator-mode)
</pre>
</div>

<p>
Customizable options:
</p>
<ul class="org-ul">
<li><p>
User Option: <code>telega-appindicator-use-label</code> 
</p>

<p>
Non-nil to add text labels to the icon.
Otherwise use just icon to show info.
labels are not supported by XEMBED based system trays, such as
<code>exwm-systemtray</code> or <code>polybar</code>. 
</p>

<p>
Default value: <code>nil</code>
</p></li>
<li><p>
User Option: <code>telega-appindicator-icon-colors</code> 
</p>

<p>
Colors to use for offline/online appindicator icon.
Alist with <code>offline</code>, <code>online</code> or <code>connecting</code> as key, and value in form
(CIRCLE-COLOR TRIANGLE-COLOR ONLINE-CIRCLE-COLOR). 
</p>

<p>
Default value: 
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">((offline <span style="font-style: italic;">"white"</span> <span style="font-style: italic;">"black"</span> nil)
 (online <span style="font-style: italic;">"#7739aa"</span> <span style="font-style: italic;">"white"</span> <span style="font-style: italic;">"#00ff00"</span>)
 (connecting <span style="font-style: italic;">"gray"</span> <span style="font-style: italic;">"white"</span> <span style="font-style: italic;">"white"</span>))
</pre>
</div></li>

<li><p>
User Option: <code>telega-appindicator-show-account-name</code> 
</p>

<p>
Non-nil to show current account name in appindicator label.
Applied only if <code>telega-appindicator-use-label</code> is non-nil. 
</p>

<p>
Default value: <code>t</code>
</p></li>
<li><p>
User Option: <code>telega-appindicator-show-mentions</code> 
</p>

<p>
Non-nil to show number of mentions in appindicator label.
Applied only if <code>telega-appindicator-use-label</code> is non-nil. 
</p>

<p>
Default value: <code>t</code>
</p></li>
<li><p>
User Option: <code>telega-appindicator-labels</code> 
</p>

<p>
List of number labels to use for the number of unread unmuted chats.
Use this labels instead of plain number.
Set to nil to use plain number. 
</p>

<p>
Default value: <code>("â¶" "â·" "â¸" "â¹" "âº" "â»" "â¼" "â½" "â¾" "â¿" "â“«" "â“¬" "â“­" "â“®" "â“¯" "â“°" "â“±" "â“²" "â“³" "â“´")</code>
</p></li>
</ul>
</div>
</div>

<div id="outline-container-telega-autoplay-mode" class="outline-3">
<h3 id="telega-autoplay-mode"><a class="self-link" href="#telega-autoplay-mode"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>telega-autoplay-mode</h3>
<div class="outline-text-3" id="text-telega-autoplay-mode">
<p>
Global minor mode to automatically open content for incoming
messages.  Message automatically opens if it matches against
<code>telega-autoplay-msg-temex</code> <a href="#telega-match-expressions">Message
Temex</a> and message's content is fully observable.
</p>

<p>
Enable with <code>(telega-autoplay-mode 1)</code> or at <code>telega</code> load time:
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(add-hook 'telega-load-hook 'telega-autoplay-mode)
</pre>
</div>

<p>
Customizable options:
</p>
<ul class="org-ul">
<li><p>
User Option: <code>telega-autoplay-msg-temex</code> 
</p>

<p>
Message Temex for messages to automatically play content for. 
</p>

<p>
Default value: <code>(type Animation Sticker AnimatedEmoji)</code>
</p></li>
<li><p>
User Option: <code>telega-autoplay-custom-emojis</code> 
</p>

<p>
Non-nil to automatically play this number of custom emojis in the message. 
</p>

<p>
Default value: <code>10</code>
</p></li>
</ul>
</div>
</div>

<div id="outline-container-telega-squash-message-mode" class="outline-3">
<h3 id="telega-squash-message-mode"><a class="self-link" href="#telega-squash-message-mode"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>telega-squash-message-mode</h3>
<div class="outline-text-3" id="text-telega-squash-message-mode">
<p>
Minor mode for chatbuf to squash messages into single one while
nobody saw this.
</p>

<p>
Squashing mean adding contents of the new message to the previous
message by editing contents of the previous message.
</p>

<p>
New message in a chat is squashed into your previous message only
if all next conditions are met:
</p>

<ol class="org-ol">
<li>Last message in chat is sent by you</li>
<li>Nobody seen your last message</li>
<li>Last and new message are both text messages</li>
<li>Last message can be edited</li>
<li>Last and new messages are <b>not</b> replying to any message</li>
<li>Last message has no associated web-page</li>
<li>New message has no <code>messageSendOptions</code> to avoid squashing
scheduled messages or similar</li>
<li>New message is sent within <code>telega-squash-message-within-seconds</code>
seconds from last message</li>
</ol>
</div>
</div>

<div id="outline-container-telega-image-mode" class="outline-3">
<h3 id="telega-image-mode"><a class="self-link" href="#telega-image-mode"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>telega-image-mode</h3>
<div class="outline-text-3" id="text-telega-image-mode">
<p>
Major mode to view images in chatbuf.  Same as <code>image-mode</code>,
however has special bindings:
</p>

<dl class="org-dl">
<dt><kbd>n</kbd> (<code>telega-image-next</code>)</dt><dd>Show next image in chat.</dd>

<dt><kbd>p</kbd> (<code>telega-image-prev</code>)</dt><dd>Show previous image in chat.</dd>
</dl>

<p>
To view high resolution image in chatbuf with <code>telega-image-mode</code>
press <kbd>RET</kbd> on the message with photo.
</p>
</div>
</div>

<div id="outline-container-telega-edit-file-mode" class="outline-3">
<h3 id="telega-edit-file-mode"><a class="self-link" href="#telega-edit-file-mode"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>telega-edit-file-mode</h3>
<div class="outline-text-3" id="text-telega-edit-file-mode">
<p>
Minor mode to edit files from Telegram messages.
In this mode <kbd>C-x C-s</kbd> will save file to Telegram cloud.
To enable <code>telega-edit-file-mode</code> for files opened from message
with <kbd>RET</kbd>, use:
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(add-hook 'telega-open-file-hook 'telega-edit-file-mode)
</pre>
</div>

<p>
While editing file press
<kbd>&lt;menu-bar&gt; &lt;goto-message&gt;</kbd>, <kbd>M-g t</kbd> (<code>telega-edit-file-goto-message</code>)
to go back to the file's message.
</p>

<p>
To switch between files opened from <code>telega</code> use
<kbd>e</kbd> (<code>telega-edit-file-switch-buffer</code>)
binding from the <a href="#telega-prefix-map">Telega prefix map</a>.
</p>

<p>
To distinguish files opened from <code>telega</code> with ordinary files
suffix is added to the buffer name.  You can modify this suffix
using user option:
</p>

<ul class="org-ul">
<li><p>
User Option: <code>telega-edit-file-buffer-name-function</code> 
</p>

<p>
Function to return buffer name when <code>telega-edit-file-mode</code> is enabled.
Function is called without arguments and should return a buffer name string.
Inside a function you can use <code>telega-edit-file-message&lt;f&gt;</code> to
get message associated with the file. 
</p>

<p>
Default value: <code>telega-edit-file-buffer-name</code>
</p></li>
</ul>
</div>
</div>

<div id="outline-container-telega-highlight-text-mode" class="outline-3">
<h3 id="telega-highlight-text-mode"><a class="self-link" href="#telega-highlight-text-mode"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>telega-highlight-text-mode</h3>
<div class="outline-text-3" id="text-telega-highlight-text-mode">
<p>
<code>jit-lock</code> powered minor mode to highlight given regexp.
</p>

<p>
Similar to <code>hi-lock</code>, however supports <code>jit-lock</code> for highlighting
dynamic content.
</p>
</div>
</div>

<div id="outline-container-telega-patrons-mode" class="outline-3">
<h3 id="telega-patrons-mode"><a class="self-link" href="#telega-patrons-mode"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>telega-patrons-mode</h3>
<div class="outline-text-3" id="text-telega-patrons-mode">
<p>
Emphasize <code>telega</code>
<a href="https://opencollective.com/telega#section-contributors">patrons</a>
by drawing special elements (telega cat ears) above the patron's
avatar, like: <img src="https://zevlg.github.io/telega/telega-patron-ava.png" alt="telega-patron-ava.png" />
</p>

<p>
In addition:
</p>
<ul class="org-ul">
<li>Display "Telega Patron Since: &lt;date&gt;" note in the patron's Chat/User description.</li>
<li>All <a href="https://zevlg.github.io/telega.el/#telega-storiesel--display-emacs-stories-in-the-dashboard">Emacs Stories</a> from <code>telega</code> patrons are automatically considered "Featured".</li>
</ul>

<p>
If you are already <code>telega</code> patron and not in the
<code>telega-patrons-alist</code> list, please <a href="https://t.me/zevlg">write
me</a>.
</p>

<p>
<code>telega-patrons-mode</code> is enabled by default.
</p>
</div>
</div>

<div id="outline-container-telega-my-location-mode" class="outline-3">
<h3 id="telega-my-location-mode"><a class="self-link" href="#telega-my-location-mode"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>telega-my-location-mode</h3>
<div class="outline-text-3" id="text-telega-my-location-mode">
<p>
<code>telega-my-location</code> is used by <code>telega</code> to calculate distance to
me for location messages.  Also, <code>telega-my-location</code> is used to
search chats nearby me.  So, having it set to correct value is
essential.  There is
<a href="#telega-live-locationel--manage-live-location-in-telega-using-geoel">contrib/telega-live-location.el</a>
which uses <code>geo.el</code> to actualize <code>telega-my-location</code>, however it
is not always possible to use it.
</p>

<p>
When <code>telega-my-location-mode</code> is enabled, your
<code>telega-my-location</code> gets automatic update when you send location
message into "Saved Messages" using mobile Telegram client.
</p>

<p>
Enable with <code>(telega-my-location-mode 1)</code> or at <code>telega</code> load time:
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(add-hook 'telega-load-hook 'telega-my-location-mode)
</pre>
</div>
</div>
</div>

<div id="outline-container-telega-active-locations-mode" class="outline-3">
<h3 id="telega-active-locations-mode"><a class="self-link" href="#telega-active-locations-mode"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>telega-active-locations-mode</h3>
<div class="outline-text-3" id="text-telega-active-locations-mode">
<p>
Minor mode to display currently active live locations in the root
buffer.
</p>

<p>
<code>telega-active-locations-mode</code> is enabled by default.
</p>

<ul class="org-ul">
<li><p>
User Option: <code>telega-active-locations-show-avatars</code> 
</p>

<p>
Non-nil to show user avatars in chat buffer. 
</p>

<p>
Default value: <code>nil</code>
</p></li>
<li><p>
User Option: <code>telega-active-locations-show-titles</code> 
</p>

<p>
Non-nil to show sender/chat titles along the side with avatars. 
</p>

<p>
Default value: <code>t</code>
</p></li>
</ul>
</div>
</div>


<div id="outline-container-telega-active-video-chats-mode" class="outline-3">
<h3 id="telega-active-video-chats-mode"><a class="self-link" href="#telega-active-video-chats-mode"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>telega-active-video-chats-mode</h3>
<div class="outline-text-3" id="text-telega-active-video-chats-mode">
<p>
Minor mode to display currently active video chats in the root
buffer.  Also display number of active video chats in the modeline
if <a href="#telega-mode-line-mode">telega-mode-line-mode</a> is enabled.
</p>

<p>
<code>telega-active-video-chats-mode</code> is enabled by default.
</p>

<p>
Customizable options:
</p>
<ul class="org-ul">
<li><p>
User Option: <code>telega-active-video-chats-temex</code> 
</p>

<p>
Chat Temex to match chat with active video chat. 
</p>

<p>
Default value: 
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">and</span> is-known
     (has-video-chat non-empty))
</pre>
</div></li>
</ul>
</div>
</div>


<div id="outline-container-telega-recognize-voice-message-mode" class="outline-3">
<h3 id="telega-recognize-voice-message-mode"><a class="self-link" href="#telega-recognize-voice-message-mode"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>telega-recognize-voice-message-mode</h3>
<div class="outline-text-3" id="text-telega-recognize-voice-message-mode">
<p>
Minor mode to automatically recognize speech in a voice/video
messages.  Available only for the Telegram Premium users.
</p>

<p>
Enable with <code>(telega-recognize-voice-message-mode 1)</code> or at
<code>telega</code> load time:
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(add-hook 'telega-load-hook 'telega-recognize-voice-message-mode)
</pre>
</div>

<p>
Customizable options:
</p>
<ul class="org-ul">
<li><p>
User Option: <code>telega-recognize-voice-message-temex</code> 
</p>

<p>
Message Temex for messages to automatically recognize speech.
Speech recognition is only applied to voice messages matching this
Message Temex.  Applied only if non-nil.
For example, to recognize speech in a voice messages only in private
chats, use <code>(chat (type private))</code> Message Temex. 
</p>

<p>
Default value: <code>nil</code>
</p></li>
</ul>
</div>
</div>

<div id="outline-container-telega-auto-translate-mode" class="outline-3">
<h3 id="telega-auto-translate-mode"><a class="self-link" href="#telega-auto-translate-mode"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>telega-auto-translate-mode</h3>
<div class="outline-text-3" id="text-telega-auto-translate-mode">
<p>
Minor chatbuf mode to automatically translate messages in the chat
to your native language.  Also translates chatbuf input from your
native language to the chat's language.
</p>

<p>
Customizable options:
</p>
<ul class="org-ul">
<li><p>
User Option: <code>telega-auto-translate-probe-language-codes</code> 
</p>

<p>
List of language codes to probe.
Chat description is used to probe chat's language. 
</p>

<p>
Default value: <code>nil</code>
</p></li>
<li><p>
User Option: <code>telega-translate-to-language-by-default</code> 
</p>

<p>
Default language code for messages translation.
If nil, then use language suggested by the server. 
</p>

<p>
Default value: <code>nil</code>
</p></li>
</ul>
</div>
</div>


<div id="outline-container-telega-auto-download-mode-wip" class="outline-3">
<h3 id="telega-auto-download-mode-wip"><a class="self-link" href="#telega-auto-download-mode-wip"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>telega-auto-download-mode (WIP)</h3>
<div class="outline-text-3" id="text-telega-auto-download-mode-wip">
<p>
Global minor mode to automatically download media files.
Auto-download settings depends on network type currently used by
<code>telega</code>.
</p>

<p>
You can modify auto-download settings by changing network type with
<kbd>M-x telega-set-network-type RET</kbd> command.
</p>

<p>
Enable auto-download with <code>(telega-auto-download-mode 1)</code> or at
<code>telega</code> load time:
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(add-hook 'telega-load-hook 'telega-auto-download-mode)
</pre>
</div>

<p>
Customizable options:
</p>
<ul class="org-ul">
<li><p>
User Option: <code>telega-auto-download-settings-alist</code> 
</p>

<p>
Alist with auto-download settings for different network types.
car of the item is the network type symbol from
<code>telega-tdlib-network-type-alist</code>, cdr is auto-download setting.
Auto-download setting could be one of <code>:disabled</code>, <code>:low</code>, <code>:medium</code>
or <code>:high</code> keyword denoting auto download preset or a plist with
TDLib's autoDownloadSettings structure. 
</p>

<p>
Default value: 
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">((roaming-mobile . <span style="font-weight: bold;">:disabled</span>)
 (mobile . <span style="font-weight: bold;">:low</span>)
 (wi-fi . <span style="font-weight: bold;">:medium</span>)
 (other . <span style="font-weight: bold;">:high</span>))
</pre>
</div></li>
</ul>
</div>
</div>


<div id="outline-container-telega-play-media-sequence-mode" class="outline-3">
<h3 id="telega-play-media-sequence-mode"><a class="self-link" href="#telega-play-media-sequence-mode"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="todo TODO">TODO</span> telega-play-media-sequence-mode</h3>
<div class="outline-text-3" id="text-telega-play-media-sequence-mode">
<p>
Play media content in subsequent manner.
</p>
</div>
</div>

<div id="outline-container-telega-root-auto-fill-mode" class="outline-3">
<h3 id="telega-root-auto-fill-mode"><a class="self-link" href="#telega-root-auto-fill-mode"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>telega-root-auto-fill-mode</h3>
<div class="outline-text-3" id="text-telega-root-auto-fill-mode">
<p>
Global minor mode to automatically adjust <code>telega-root-fill-column</code>
to the width of the window displaying rootbuf.
</p>

<p>
<code>telega-root-auto-fill-mode</code> is enabled by default.
</p>
</div>
</div>

<div id="outline-container-telega-voip-sounds-mode" class="outline-3">
<h3 id="telega-voip-sounds-mode"><a class="self-link" href="#telega-voip-sounds-mode"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>telega-voip-sounds-mode</h3>
<div class="outline-text-3" id="text-telega-voip-sounds-mode">
<p>
Mode to notify about VoIP call by playing sounds.
<code>telega-voip-sounds-mode</code> is enabled by default.  Disable it with:
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(add-hook 'telega-load-hook (<span style="font-weight: bold;">lambda</span> () (telega-voip-sounds-mode -1)))
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-contributed-packages" class="outline-2">
<h2 id="contributed-packages"><a class="self-link" href="#contributed-packages"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Contributed packages</h2>
<div class="outline-text-2" id="text-contributed-packages">
<p>
<code>contrib/</code> directory contains packages contributed to <code>telega</code>
project.
</p>
</div>

<div id="outline-container-ol-telegael--org-mode-links-to-telegram-chats-and-messages" class="outline-3">
<h3 id="ol-telegael--org-mode-links-to-telegram-chats-and-messages"><a class="self-link" href="#ol-telegael--org-mode-links-to-telegram-chats-and-messages"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><i>ol-telega.el</i> &#x2013; Org mode links to telegram chats and messages</h3>
<div class="outline-text-3" id="text-ol-telegael--org-mode-links-to-telegram-chats-and-messages">
<p>
Installs "telega" links to Org mode.
</p>

<p>
"telega" link can point to a chat, a message or content of a
message.
</p>

<p>
Creating links to a message content is very useful in conjuction
with <a href="#telega-edit-file-mode">Edit File Mode</a>, so you can store
your Org mode files in Telegram Cloud and create links to them in
Roam manner.
</p>

<p>
Customizable options:
</p>

<ul class="org-ul">
<li><p>
User Option: <code>org-telega-chat-link-format</code> 
</p>

<p>
Description format for link to a chat.
Format spec:
%u - chat username if any, %t otherwise.
%t - chat title with brackets. 
</p>

<p>
Default value: 
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">#(<span style="font-style: italic;">"&#9664;%t"</span> 0 1
  (face
   (italic telega-blue)))
</pre>
</div></li>

<li><p>
User Option: <code>org-telega-msg-link-format</code> 
</p>

<p>
Description format for link to a message.
Format spec:
%u - user username if any, %t otherwise.
%t - user title without brackets.
%m - one line message body. 
</p>

<p>
Default value: 
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">#(<span style="font-style: italic;">"&#9664;%u&gt; %&gt;.32m"</span> 0 1
  (face
   (italic telega-blue)))
</pre>
</div></li>

<li><p>
User Option: <code>org-telega-file-link-format</code> 
</p>

<p>
Description format for link to a message to open message's media file.
Format spec:
%u - user username if any, %t otherwise.
%t - user title without brackets.
%m - one line message body. 
</p>

<p>
Default value: 
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">#(<span style="font-style: italic;">"&#9664;&#128206;%u&gt; %&gt;.32m"</span> 0 1
  (face
   (italic telega-blue)))
</pre>
</div></li>
</ul>
</div>
</div>


<div id="outline-container-telega-status-historyel--global-minore-mode-to-save-users-online-status-history" class="outline-3">
<h3 id="telega-status-historyel--global-minore-mode-to-save-users-online-status-history"><a class="self-link" href="#telega-status-historyel--global-minore-mode-to-save-users-online-status-history"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><i>telega-status-history.el</i> &#x2013; Global minore mode to save user's online status history</h3>
<div class="outline-text-3" id="text-telega-status-historyel--global-minore-mode-to-save-users-online-status-history">
<p>
Saves online status history into <code>telega-status-history-logs-dir</code> directory.
</p>
</div>
</div>

<div id="outline-container-telega-url-shortenel--makes-urls-look-nicer" class="outline-3">
<h3 id="telega-url-shortenel--makes-urls-look-nicer"><a class="self-link" href="#telega-url-shortenel--makes-urls-look-nicer"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><i>telega-url-shorten.el</i> &#x2013; Makes urls look nicer</h3>
<div class="outline-text-3" id="text-telega-url-shortenel--makes-urls-look-nicer">
<p>
Minor mode for chatbuf to show shorter version for some URLs.  For
example, with <code>telega-url-shorten-mode</code> enabled in chatbuf, urls
like:
</p>

<pre class="example" id="org95c09f0">
https://github.com/zevlg/telega.el/issues/105
https://gitlab.com/jessieh/mood-line/issues/6
https://www.youtube.com/watch?v=0m2jR6_eMkU
https://ru.wikipedia.org/wiki/Ð”ÑƒÑˆ
</pre>

<p>
Will look like:
<img src="https://zevlg.github.io/telega/telega-url-shorten.png" alt="telega-url-shorten.png" />
</p>

<p>
Can be enabled globally in all chats matching
<code>telega-url-shorten-mode-for</code> <a href="#telega-match-expressions">chat
temex</a> (see below) with <code>(global-telega-url-shorten-mode 1)</code> or by
adding:
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(add-hook 'telega-load-hook 'global-telega-url-shorten-mode)
</pre>
</div>

<p>
Depends on
<a href="https://github.com/domtronn/all-the-icons.el">all-the-icons</a>
Emacs package.
</p>

<p>
Customizable options:
</p>

<ul class="org-ul">
<li><p>
User Option: <code>telega-url-shorten-use-images</code> 
</p>

<p>
Non-nil to use images on graphics display. 
</p>

<p>
Default value: <code>nil</code>
</p></li>

<li><p>
User Option: <code>telega-url-shorten-regexps</code>
Alist of patterns for URL shortening.
</p>

<p>
To change <code>:symbol</code> or <code>:svg-icon</code> property for existing url
shortening pattern use something like:
</p>
<pre class="example">
(plist-put (cdr (assq '&lt;LABEL&gt; telega-url-shorten-regexps))
       :&lt;PROP&gt; &lt;VALUE&gt;)
</pre></li>

<li><p>
User Option: <code>telega-url-shorten-mode-for</code> 
</p>

<p>
Chat filter for <code>global-telega-url-shorten-mode</code>.
<code>global-telega-url-shorten-mode</code> enables urls shortening only for
chats matching this chat filter. 
</p>

<p>
Default value: <code>all</code>
</p></li>
</ul>
</div>
</div>

<div id="outline-container-telega-alertel--notifications-using-alertel" class="outline-3">
<h3 id="telega-alertel--notifications-using-alertel"><a class="self-link" href="#telega-alertel--notifications-using-alertel"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><i>telega-alert.el</i> &#x2013; Notifications using <code>alert.el</code></h3>
<div class="outline-text-3" id="text-telega-alertel--notifications-using-alertel">
<p>
To enable notifications using <code>alert.el</code> use:
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(telega-alert-mode 1)
</pre>
</div>

<p>
Alerts for <code>telega.el</code> are fired with <code>:mode 'telega-chat-mode</code>
value.  You might use this to customize alert rules with
<code>alert-add-rule</code>.
</p>
</div>
</div>

<div id="outline-container-telega-dired-dwimel--attach-files-from-dired-in-dwim-style" class="outline-3">
<h3 id="telega-dired-dwimel--attach-files-from-dired-in-dwim-style"><a class="self-link" href="#telega-dired-dwimel--attach-files-from-dired-in-dwim-style"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><i>telega-dired-dwim.el</i> &#x2013; Attach files from dired in DWIM style</h3>
<div class="outline-text-3" id="text-telega-dired-dwimel--attach-files-from-dired-in-dwim-style">
<p>
This package advises <code>dired-do-copy</code> to attach files into visible chatbuf.
</p>

<p>
In dired, mark files you want to attach and press <kbd>C</kbd>.  If
you have some chatbuf visible, marked files will be attached in
that chatbuf.
</p>
</div>
</div>

<div id="outline-container-telega-live-locationel--manage-live-location-in-telega-using-geoel" class="outline-3">
<h3 id="telega-live-locationel--manage-live-location-in-telega-using-geoel"><a class="self-link" href="#telega-live-locationel--manage-live-location-in-telega-using-geoel"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><i>telega-live-location.el</i> &#x2013; Manage live location in Telega using geo.el</h3>
<div class="outline-text-3" id="text-telega-live-locationel--manage-live-location-in-telega-using-geoel">
<p>
Enable this mode with <kbd>M-x global-telega-live-location-mode RET</kbd>
</p>

<p>
This mode installs new <code>live-geo-location</code> chat attach type, use it
with <kbd>C-c C-a live-geo-location RET</kbd> in the chatbuf.
</p>

<p>
This mode requires the <code>geo.el</code> library, available at
<a href="https://git.sr.ht/~oldosfan/geo-xdg.el">https://git.sr.ht/~oldosfan/geo-xdg.el</a>
</p>

<p>
Take into account that using <code>geo-simulate</code> backend to fake geo
location data is Telegram API ToS violation.  See 1.4 in
<a href="https://core.telegram.org/api/terms">https://core.telegram.org/api/terms</a>
</p>
</div>
</div>

<div id="outline-container-telega-mnzel--display-emacs-content-inside-telega-messages" class="outline-3">
<h3 id="telega-mnzel--display-emacs-content-inside-telega-messages"><a class="self-link" href="#telega-mnzel--display-emacs-content-inside-telega-messages"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><i>telega-mnz.el</i> &#x2013; Display Emacs content inside Telega messages.</h3>
<div class="outline-text-3" id="text-telega-mnzel--display-emacs-content-inside-telega-messages">
<p>
Global minor mode to highlight code blocks inside messages.
</p>

<p>
Can be enabled globally in all chats matching
<code>telega-mnz-mode-for</code> (see below) chat filter with
<code>(global-telega-mnz-mode 1)</code> or by adding:
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">telega-mnz</span>)
(add-hook 'telega-load-hook 'global-telega-mnz-mode)
</pre>
</div>

<p>
Optionally depends on <code>language-detection</code> Emacs package.  If
<code>language-detection</code> is available, then laguage could be detected
automatically for code blocks without language explicitly
specified.  Install <code>language-detection</code> with <kbd>M-x package-install RET language-detection RET</kbd>
</p>

<p>
<code>telega-mnz</code> installs <kbd>'</kbd>
(<code>telega-mnz-send-region-as-code</code>) binding into
<a href="#telega-prefix-map">telega prefix map</a> to attach region as code
to a chatbuf.
</p>

<p>
Also, <code>telega-mnz</code> installs <code>code</code> <a href="#attaching-media">media
attachment type</a>, use it with <kbd>C-c C-a code RET</kbd> in
chatbuf.
</p>


<p>
Customizable options:
</p>
<ul class="org-ul">
<li><p>
User Option: <code>telega-mnz-mode-for</code> 
</p>

<p>
Chat filter for <code>global-telega-mnz-mode</code>.
Global mnz mode enables <code>telega-mnz-mode</code> only for chats matching
this chat filter. 
</p>

<p>
Default value: <code>all</code>
</p></li>

<li><p>
User Option: <code>telega-mnz-keep-pre-face</code> 
</p>

<p>
Non-nil to keep <code>telega-entity-type-pre</code> face on the highlighted text. 
</p>

<p>
Default value: <code>t</code>
</p></li>

<li><p>
User Option: <code>telega-mnz-entity-types</code> 
</p>

<p>
List of entity types for which mnz performs highlighting. 
</p>

<p>
Default value: <code>(textEntityTypePre textEntityTypePreCode textEntityTypeCode)</code>
</p></li>

<li><p>
User Option: <code>telega-mnz-edit-code-block</code> 
</p>

<p>
How to edit message containing mnz code blocks. 
</p>

<p>
Default value: <code>query</code>
</p></li>

<li><p>
User Option: <code>telega-mnz-use-language-detection</code> 
</p>

<p>
Non-nil to use <code>language-detection</code> for blocks without specified language.
Could be also a number, meaning that language detection is done
only for code larger then this number of chars. 
</p>

<p>
Default value: <code>(200 . 4)</code>
</p></li>

<li><p>
User Option: <code>telega-mnz-edit-display-buffer-action</code> 
</p>

<p>
Action value when poping to code edit buffer.
See docstring for <code>display-buffer</code> for the value meaning. 
</p>

<p>
Default value: <code>((display-buffer-below-selected))</code>
</p></li>
</ul>
</div>
</div>

<div id="outline-container-telega-dashboardel--important-telega-chats-in-the-emacs-dashboard" class="outline-3">
<h3 id="telega-dashboardel--important-telega-chats-in-the-emacs-dashboard"><a class="self-link" href="#telega-dashboardel--important-telega-chats-in-the-emacs-dashboard"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><i>telega-dashboard.el</i> &#x2013; Important telega chats in the Emacs dashboard</h3>
<div class="outline-text-3" id="text-telega-dashboardel--important-telega-chats-in-the-emacs-dashboard">
<p>
Display important telega chats in the Emacs dashboard.  Enable it with:
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">telega-dashboard</span>)
(add-to-list 'dashboard-items '(telega-chats . 5))
</pre>
</div>

<p>
Screenshot of <code>telega-dashboard</code> in action:
<img src="https://zevlg.github.io/telega/telega-dashboard.png" alt="telega-dashboard.png" />
</p>

<p>
Customizable options:
</p>
<ul class="org-ul">
<li><p>
User Option: <code>telega-dashboard-chat-filter</code> 
</p>

<p>
Chat Filter used to filter chats to display in the Emacs dashboard. 
</p>

<p>
Default value: 
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">or</span> mention
    (<span style="font-weight: bold;">and</span> unread unmuted))
</pre>
</div></li>

<li><p>
User Option: <code>telega-dashboard-chat-inserter</code> 
</p>

<p>
Inserter for the chat button in the Emacs dashboard. 
</p>

<p>
Default value: <code>telega-ins--chat-full</code>
</p></li>
</ul>
</div>
</div>

<div id="outline-container-telega-emacs-storiesel--display-emacs-stories-in-the-dashboard" class="outline-3">
<h3 id="telega-emacs-storiesel--display-emacs-stories-in-the-dashboard"><a class="self-link" href="#telega-emacs-storiesel--display-emacs-stories-in-the-dashboard"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><i>telega-emacs-stories.el</i> &#x2013; Display Emacs Stories in the dashboard</h3>
<div class="outline-text-3" id="text-telega-emacs-storiesel--display-emacs-stories-in-the-dashboard">
<p>
Emacs Stories: share your Emacs experience with other Emacs users.
</p>

<p>
Display recent <a href="https://t.me/emacs_stories">Emacs Stories</a> in the
dashboard.  Enable it with:
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">telega-emacs-stories</span>)
(telega-emacs-stories-mode 1)
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">"Emacs Stories" rootview</span>
(define-key telega-root-mode-map (kbd <span style="font-style: italic;">"v e"</span>) 'telega-view-emacs-stories)
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Emacs Dashboard</span>
(add-to-list 'dashboard-items '(telega-emacs-stories . 5))
</pre>
</div>

<p>
Apart from dashboard, <code>telega-emacs-stories</code> provides "Emacs Stories"
<a href="https://zevlg.github.io/telega.el/#rootbuf-view-switching">Root
View</a>.  To enable this view execute <kbd>M-x telega-view-emacs-stories RET</kbd> in the root buffer.
</p>

<p>
If you see inappropriate content in some Emacs Story, please report
this story by pressing
<kbd>!</kbd> (<code>telega-emacs-stories-msg-report</code>) on
the story.
</p>

<p>
For best performance consider newest Emacs28 with <code>:base_uri</code> svg
image property support.
</p>

<p>
Screenshots of <code>telega-emacs-stories</code> in action:
<img src="https://zevlg.github.io/telega/emacs-stories-dashboard.png" alt="emacs-stories-dashboard.png" />
</p>

<p>
And screenshot of "Emacs Stories" root view:
<img src="https://zevlg.github.io/telega/emacs-stories-rootview.png" alt="emacs-stories-rootview.png" />
</p>

<p>
Customizable options:
</p>
<ul class="org-ul">
<li><p>
User Option: <code>telega-emacs-stories-show</code> 
</p>

<p>
Show <code>all</code> or only <code>unread</code> stories. 
</p>

<p>
Default value: <code>unread</code>
</p></li>
<li><p>
User Option: <code>telega-emacs-stories-height</code> 
</p>

<p>
Height in chars for Emacs Stories buttons. 
</p>

<p>
Default value: <code>6</code>
</p></li>
<li><p>
User Option: <code>telega-emacs-stories-notify-if</code> 
</p>

<p>
Pop notification on new story if stories chat matches this Chat Filter. 
</p>

<p>
Default value: <code>(not unmuted)</code>
</p></li>
<li><p>
User Option: <code>telega-emacs-stories-preload-content</code> 
</p>

<p>
Preload content when Emacs Story is inserted, so can be viewed instantly. 
</p>

<p>
Default value: <code>t</code>
</p></li>
<li><p>
User Option: <code>telega-emacs-stories-root-view-count</code> 
</p>

<p>
Number of Emacs Stories to show in "Emacs Stories" rootview. 
</p>

<p>
Default value: <code>12</code>
</p></li>
<li><p>
User Option: <code>telega-emacs-stories-root-view-keep-viewed</code> 
</p>

<p>
Keep viewed stories in the "Emacs Stories" rootview.
Non-nil to keep story in the root view after story is viewed. 
</p>

<p>
Default value: <code>t</code>
</p></li>
</ul>
</div>
</div>

<div id="outline-container-telega-transientel--transient-magit-like-style-commands-for-telega" class="outline-3">
<h3 id="telega-transientel--transient-magit-like-style-commands-for-telega"><a class="self-link" href="#telega-transientel--transient-magit-like-style-commands-for-telega"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><i>telega-transient.el</i> &#x2013; Transient (magit-like style) commands for telega</h3>
<div class="outline-text-3" id="text-telega-transientel--transient-magit-like-style-commands-for-telega">
<p>
Use transient (magit-like style) commands in the telega.  Enable it
with:
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">telega-transient</span>)
(telega-transient-mode 1)
</pre>
</div>

<p>
Control keymaps for which to use transient with:
</p>
<ul class="org-ul">
<li><p>
User Option: <code>telega-transient-keymaps</code> 
</p>

<p>
List of keymaps names to apply transient for. 
</p>

<p>
Default value: <code>(telega-prefix-map telega-sort-map telega-filter-map telega-describe-map telega-folder-map telega-voip-map telega-root-fastnav-map telega-root-view-map telega-chatbuf-fastnav-map)</code>
</p></li>
</ul>
</div>
</div>

<div id="outline-container-telega-adblockel--block-advertisement-messages" class="outline-3">
<h3 id="telega-adblockel--block-advertisement-messages"><a class="self-link" href="#telega-adblockel--block-advertisement-messages"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><i>telega-adblock.el</i> &#x2013; Block advertisement messages</h3>
<div class="outline-text-3" id="text-telega-adblockel--block-advertisement-messages">
<p>
Telegram channels often advertises another channels in annoying
manner.  Sometimes adverts has inappropriate content.  This mode
uses <a href="#client-side-messages-ignoring">client side messages
ignoring</a> functionality to block such advert messages.
</p>

<p>
To enable advertisement blocking use:
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(telega-adblock-mode 1)
</pre>
</div>

<p>
Customizable options:
</p>
<ul class="org-ul">
<li><p>
User Option: <code>telega-adblock-for</code> 
</p>

<p>
Chat Temex to match chats for which to apply adblock logic. 
</p>

<p>
Default value: 
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">and</span>
 (type channel)
 (not unmuted)
 (not verified))
</pre>
</div></li>

<li><p>
User Option: <code>telega-adblock-chat-order-if-last-message-ignored</code> 
</p>

<p>
Custom chat order for chats with last message being ignored by adblock.
Set to "1" to put chats with ignored last message to the bottom of
the rootbuf. 
</p>

<p>
Default value: <code>nil</code>
</p></li>
<li><p>
User Option: <code>telega-adblock-verbose</code> 
</p>

<p>
Non-nil to show (in echo area) reason why message is ignored by adblock. 
</p>

<p>
Default value: <code>nil</code>
</p></li>
<li><p>
User Option: <code>telega-adblock-max-distance</code> 
</p>

<p>
Maximum string-distance for self-link.
Used for heuristics to avoid blocking non-advert messages in some channels.
Set it to less value if you see some advert messages not being blocked. 
</p>

<p>
Default value: <code>4</code>
</p></li>
<li><p>
User Option: <code>telega-adblock-forwarded-messages</code> 
</p>

<p>
Non-nil to block messages forwarded from other channels.
Block them even if a message has no links at all. 
</p>

<p>
Default value: <code>t</code>
</p></li>
<li><p>
User Option: <code>telega-adblock-block-msg-temex</code> 
</p>

<p>
Message's matching this temex will be ignored by adblock. 
</p>

<p>
Default value: <code>nil</code>
</p></li>
<li><p>
User Option: <code>telega-adblock-allow-msg-temex</code> 
</p>

<p>
Message's matching this temex will be allowed. 
</p>

<p>
Default value: <code>(or is-reply-to-msg is-reply-to-story post-with-comments)</code>
</p></li>
</ul>
</div>
</div>

<div id="outline-container-telega-channels-exportel--export-telegam-channels-to-opml" class="outline-3">
<h3 id="telega-channels-exportel--export-telegam-channels-to-opml"><a class="self-link" href="#telega-channels-exportel--export-telegam-channels-to-opml"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><i>telega-channels-export.el</i> &#x2013; Export Telegam channels to OPML</h3>
<div class="outline-text-3" id="text-telega-channels-exportel--export-telegam-channels-to-opml">
<p>
Use <kbd>M-x telega-channels-export RET</kbd> to export public
channels shown in the rootbuf (i.e. matching Active Chat Filter)
into XML file of <a href="https://en.wikipedia.org/wiki/OPML">OPML</a>
format.  Making it possible to import this file into any RSS reader
that supports OPML.
</p>

<p>
Customizable options:
</p>
<ul class="org-ul">
<li><p>
User Option: <code>telega-channels-export-template</code> 
</p>

<p>
URL template where single %s is substituteed with channel username.
Use rsshub or rssbrdige (or whatever that supports Telegram) url. 
</p>

<p>
Default value: <code>"https://sebsauvage.net/rss-bridge/?action=display&amp;bridge=Telegram&amp;username=%s&amp;format=Atom"</code>
</p></li>
</ul>
</div>
</div>

<div id="outline-container-telega-bridge-botel--replace-bridge-bot-user" class="outline-3">
<h3 id="telega-bridge-botel--replace-bridge-bot-user"><a class="self-link" href="#telega-bridge-botel--replace-bridge-bot-user"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><i>telega-bridge-bot.el</i> &#x2013; Replace bridge bot user.</h3>
<div class="outline-text-3" id="text-telega-bridge-botel--replace-bridge-bot-user">
<p>
This package advises some telega functions to replace the message
bridge bot (like <a href="https://t.me/matrix_t2bot"><code>@matrix_t2bot</code></a>), to
make it look like the user itself.  Currently only works for matrix
bridge bot, but can be extended to other bridges by adding more
handlers to the <code>telega-bridge-bot--counterparty-handler-plist</code> .
</p>

<p>
Enable it with:
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">telega-bridge-bot</span>)
</pre>
</div>

<p>
and customize the <code>telega-bridge-bot-bridge-info-plist</code> to specify the
relationship between the bridge bot and the chat.
</p>

<p>
For example, if you want to replace the bridge bot
<a href="https://t.me/matrix_t2bot"><code>@matrix_t2bot</code></a> in the Telegram chat
<a href="https://t.me/emacs_china"><code>@emacs_china</code></a>, you can set the following:
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> telega-bridge-bot-bridge-info-plist
      '(-1001773572820 <span style="font-weight: bold; font-style: italic;">; </span><span style="font-weight: bold; font-style: italic;">id of the @emacs_china</span>
      (420415423 <span style="font-weight: bold; font-style: italic;">; </span><span style="font-weight: bold; font-style: italic;">id of the @matrix_t2bot</span>
       <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">will fetch member info with this matrix room id</span>
       (<span style="font-weight: bold;">:type</span> <span style="font-weight: bold;">:matrix</span> <span style="font-weight: bold;">:chat-id</span> <span style="font-style: italic;">"!EGzPXoyqkJdTByDCjD:mozilla.org"</span>))))
</pre>
</div>

<p>
If you want download avatar from matrix, you should also set
<code>telega-bridge-bot-matrix-access-token</code> or set
<code>telega-bridge-bot-matrix-user</code> then put the access token in <code>.authinfo</code> ,
the host should be <code>matrix.org</code> and the user should be the same as
<code>telega-bridge-bot-matrix-user</code>.
This is required because only user in the room can access the member info.
</p>
</div>
</div>
</div>

<div id="outline-container-troubleshooting" class="outline-2">
<h2 id="troubleshooting"><a class="self-link" href="#troubleshooting"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Troubleshooting</h2>
<div class="outline-text-2" id="text-troubleshooting">
</div>

<div id="outline-container-cant-compile-telega-server" class="outline-3">
<h3 id="cant-compile-telega-server"><a class="self-link" href="#cant-compile-telega-server"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Can't compile <code>telega-server</code></h3>
<div class="outline-text-3" id="text-cant-compile-telega-server">
<p>
<b><b>TODO</b></b>
</p>
</div>
</div>

<div id="outline-container-invalid-tdlib-version" class="outline-3">
<h3 id="invalid-tdlib-version"><a class="self-link" href="#invalid-tdlib-version"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Invalid TDLib version</h3>
<div class="outline-text-3" id="text-invalid-tdlib-version">
<p>
<b><b>TODO</b></b>
</p>
</div>
</div>

<div id="outline-container-stickers-are-not-shown" class="outline-3">
<h3 id="stickers-are-not-shown"><a class="self-link" href="#stickers-are-not-shown"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Stickers are not shown</h3>
<div class="outline-text-3" id="text-stickers-are-not-shown">
<p>
<b><b>Q</b></b>: Stickers are not fully shown, I see only outlines for some
stickers, like on the screenshot:
<img src="https:/zevlg.github.io/telega/bad-stickers.jpg" alt="bad-stickers.jpg" />
</p>

<p>
<b><b>A</b></b>: <code>telega</code> uses <code>dwebp</code> tool to convert stickers in the WEBP
format to the format supported by Emacs.  See
<a href="#stickers--animations">Stickers / Animations</a> for details.
</p>
</div>
</div>

<div id="outline-container-notifications-does-not-work" class="outline-3">
<h3 id="notifications-does-not-work"><a class="self-link" href="#notifications-does-not-work"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Notifications does not work</h3>
<div class="outline-text-3" id="text-notifications-does-not-work">
<p>
<b><b>Q</b></b>: I've enabled <code>telega-notifications-mode</code> as described in the
manual, but notifications still does not pop up.
</p>

<p>
<b><b>A</b></b>: Make sure your time is correct.  Eval <code>(telega-time-seconds)</code>
to get UTC time in your Emacs, it should be more or less the same as
on <a href="https://www.unixtimestamp.com/">https://www.unixtimestamp.com/</a>
</p>
</div>
</div>
</div>
</div>
</body>
</html>
